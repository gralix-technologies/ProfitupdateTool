import{r as t,j as e,L as r,a as m}from"./app-BkeQkwCz.js";import{h as x,A as p,d as b,c as f}from"./AppLayout-QgBVyLMh.js";import{I as h}from"./IconPlus-Cs3MX6an.js";import{I as y}from"./IconKey-BGKMV__n.js";import{I as U}from"./IconSearch-qzSKrpRq.js";import{I as w}from"./IconMail-hRfONb87.js";import{I}from"./IconCalendar-C52FWICz.js";import{I as A}from"./IconTrash-DY-55J-g.js";/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-1"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-2"}]],d=x("outline","user-check","UserCheck",C);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h3.5",key:"svg-1"}],["path",{d:"M22 22l-5 -5",key:"svg-2"}],["path",{d:"M17 22l5 -5",key:"svg-3"}]],z=x("outline","user-x","UserX",k);function F({users:l,roles:o,auth:_}){const[c,j]=t.useState(""),[n,N]=t.useState(l||[]);t.useEffect(()=>{const s=l.filter(a=>a.name.toLowerCase().includes(c.toLowerCase())||a.email.toLowerCase().includes(c.toLowerCase()));N(s)},[c,l]);const v=s=>{confirm("Are you sure you want to delete this user?")&&m.delete(`/admin/users/${s}`)},g=(s,a)=>{confirm(`Are you sure you want to ${a?"deactivate":"activate"} this user?`)&&m.patch(`/admin/users/${s}/toggle-status`)},u=s=>{switch(s){case"Admin":return"danger";case"Analyst":return"warning";case"Viewer":return"success";default:return"secondary"}};return e.jsxs(p,{title:"User Management",children:[e.jsx("div",{className:"page-header d-print-none",children:e.jsx("div",{className:"container-xl",children:e.jsxs("div",{className:"row g-2 align-items-center",children:[e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"page-pretitle",children:"Admin"}),e.jsx("h2",{className:"page-title",children:"User Management"})]}),e.jsx("div",{className:"col-auto ms-auto d-print-none",children:e.jsx("div",{className:"btn-list",children:e.jsxs(r,{href:"/admin/users/create",className:"btn btn-primary",children:[e.jsx(h,{size:16,className:"me-1"}),"Add User"]})})})]})})}),e.jsx("div",{className:"page-body",children:e.jsxs("div",{className:"container-xl",children:[e.jsxs("div",{className:"row row-deck row-cards mb-3",children:[e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"subheader",children:"Total Users"}),e.jsx("div",{className:"ms-auto",children:e.jsx(d,{size:24,className:"text-primary"})})]}),e.jsx("div",{className:"h1 mb-3",children:l.length}),e.jsx("div",{className:"d-flex mb-2",children:e.jsx("div",{className:"text-muted",children:"Registered users"})})]})})}),e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"subheader",children:"Active Users"}),e.jsx("div",{className:"ms-auto",children:e.jsx(d,{size:24,className:"text-success"})})]}),e.jsx("div",{className:"h1 mb-3",children:l.filter(s=>s.is_active!==!1).length}),e.jsx("div",{className:"d-flex mb-2",children:e.jsx("div",{className:"text-muted",children:"Currently active"})})]})})}),e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"subheader",children:"Admin Users"}),e.jsx("div",{className:"ms-auto",children:e.jsx(b,{size:24,className:"text-danger"})})]}),e.jsx("div",{className:"h1 mb-3",children:l.filter(s=>{var a;return(a=s.roles)==null?void 0:a.some(i=>i.name==="Admin")}).length}),e.jsx("div",{className:"d-flex mb-2",children:e.jsx("div",{className:"text-muted",children:"Administrators"})})]})})}),e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"subheader",children:"Total Roles"}),e.jsx("div",{className:"ms-auto",children:e.jsx(y,{size:24,className:"text-info"})})]}),e.jsx("div",{className:"h1 mb-3",children:o.length}),e.jsx("div",{className:"d-flex mb-2",children:e.jsx("div",{className:"text-muted",children:"Available roles"})})]})})})]}),e.jsxs("div",{className:"card mb-3",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Filter Users"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Search"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",children:e.jsx(U,{size:16})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name or email...",value:c,onChange:s=>j(s.target.value)})]})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Users"})}),e.jsx("div",{className:"card-body",children:n.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-vcenter card-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"User"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Roles"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Last Login"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:n.map(s=>{var a;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"avatar avatar-sm me-2",children:e.jsx("div",{className:"avatar-initial bg-primary text-white",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:s.name}),e.jsxs("div",{className:"text-muted small",children:["ID: ",s.id]})]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(w,{size:16,className:"me-2 text-muted"}),s.email]})}),e.jsx("td",{children:e.jsx("div",{className:"d-flex flex-wrap gap-1",children:((a=s.roles)==null?void 0:a.map(i=>e.jsx("span",{className:`badge bg-${u(i.name)}`,children:i.name},i.id)))||e.jsx("span",{className:"badge bg-secondary",children:"No roles"})})}),e.jsx("td",{children:e.jsx("span",{className:`badge bg-${s.is_active!==!1?"success":"danger"}`,children:s.is_active!==!1?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(I,{size:16,className:"me-2 text-muted"}),e.jsx("span",{className:"text-muted small",children:s.last_login_at?new Date(s.last_login_at).toLocaleDateString():"Never"})]})}),e.jsx("td",{children:e.jsxs("div",{className:"btn-list",children:[e.jsx(r,{href:`/admin/users/${s.id}/edit`,className:"btn btn-sm btn-outline-primary",children:e.jsx(f,{size:16})}),e.jsx("button",{className:"btn btn-sm btn-outline-warning",onClick:()=>g(s.id,s.is_active!==!1),children:s.is_active!==!1?e.jsx(z,{size:16}):e.jsx(d,{size:16})}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>v(s.id),children:e.jsx(A,{size:16})})]})})]},s.id)})})]})}):e.jsxs("div",{className:"empty",children:[e.jsx("div",{className:"empty-img",children:e.jsx(d,{size:48,className:"text-muted"})}),e.jsx("p",{className:"empty-title",children:"No users found"}),e.jsx("p",{className:"empty-subtitle text-muted",children:c?"Try adjusting your search terms":"Create your first user to get started"}),e.jsx("div",{className:"empty-action",children:e.jsxs(r,{href:"/admin/users/create",className:"btn btn-primary",children:[e.jsx(h,{size:16,className:"me-1"}),"Add User"]})})]})})]})]})})]})}export{F as default};
