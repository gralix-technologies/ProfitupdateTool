import{j as s,L as a}from"./app-BkeQkwCz.js";import{u as j,A as x}from"./AppLayout-QgBVyLMh.js";import{P as g}from"./ProductForm-eOWwUB-i.js";import{u as b}from"./useFormWithCsrf-CQ_fNGy5.js";import{I as N}from"./IconArrowLeft-0rt3x0IP.js";import"./IconTrash-DY-55J-g.js";import"./IconPlus-Cs3MX6an.js";function _({categories:n,field_types:c}){const{data:o,setData:l,post:d,processing:m,errors:u}=b({name:"",category:"",description:"",is_active:!0,field_definitions:[],_token:null}),{showSuccess:p,showError:r}=j(),f=()=>{console.log("Submitting product data:",o);const i=[];if(o.field_definitions&&Array.isArray(o.field_definitions)&&o.field_definitions.forEach((e,t)=>{e.type==="Lookup"&&(!e.options||e.options.length===0||e.options.every(h=>!h.trim()))&&i.push(`Field ${t+1} (${e.name||"Unnamed"}): Lookup fields must have at least one option`)}),i.length>0){r(i.join(`
`),"Validation Error");return}d("/products",{onStart:()=>{console.log("Form submission started...")},onProgress:()=>{console.log("Form submission in progress...")},onSuccess:e=>{console.log("Form submission successful:",e),p("Product created successfully!")},onError:e=>{if(console.error("Form submission error:",e),console.error("Error type:",typeof e),console.error("Error details:",JSON.stringify(e,null,2)),typeof e=="object"&&e!==null)if(Array.isArray(e))r(e.join(", "),"Validation Error");else{const t=Object.values(e).flat();r(t.join(", "),"Validation Error")}else r(typeof e=="string"?e:"Failed to create product. Please try again.")},onFinish:()=>{console.log("Form submission finished")}})};return s.jsxs(x,{title:"Create Product",children:[s.jsx("div",{className:"page-header d-print-none",children:s.jsx("div",{className:"container-xl",children:s.jsxs("div",{className:"row g-2 align-items-center",children:[s.jsxs("div",{className:"col",children:[s.jsx("nav",{"aria-label":"breadcrumb",children:s.jsxs("ol",{className:"breadcrumb",children:[s.jsx("li",{className:"breadcrumb-item",children:s.jsx(a,{href:"/products",children:"Products"})}),s.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Create"})]})}),s.jsx("div",{className:"page-pretitle",children:"Financial Products"}),s.jsx("h2",{className:"page-title",children:"Create New Product"})]}),s.jsx("div",{className:"col-auto ms-auto d-print-none",children:s.jsx("div",{className:"btn-list",children:s.jsxs(a,{href:"/products",className:"btn",children:[s.jsx(N,{size:16,className:"me-1"}),"Back to Products"]})})})]})})}),s.jsx("div",{className:"page-body",children:s.jsx("div",{className:"container-fluid px-3",children:s.jsx("div",{className:"row g-3",children:s.jsx("div",{className:"col-12",children:s.jsx(g,{data:o,setData:l,errors:u,categories:n,field_types:c,processing:m,submitText:"Create Product",cancelUrl:"/products",onSubmit:f})})})})})]})}export{_ as default};
