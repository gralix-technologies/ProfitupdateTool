import{r as o,g as Ke,j as e,L as Pe}from"./app-BkeQkwCz.js";import{h as K,k as y,l as E,d as ke,A as ba,m as ya}from"./AppLayout-QgBVyLMh.js";import{c as F,f as R,a as _,s as Ve,b as Na,d as wa,e as se,g as Pa,h as Ue,p as ue,i as ka,j as He,k as xe,l as Aa,m as _a,n as Oa,o as Ea,q as Ra,r as La,u as S,t as re,v as V,w as C,x as Ge,y as Ze,z as qe,A as Sa,B as Ca,L as M,P as Ia,C as $a,D as Xe,E as Ye,T as Je,F as Ta,G as Da,H as Ma,I as Qe,J as ea,K as ae,M as za,N as Fa,O as Ba,Q as Wa,R as Ae,S as Ka,U as Va,V as Ua,W as Ha,X as aa,Y as Ga,Z as _e,_ as Za,$ as Oe,a0 as qa,a1 as Xa,a2 as Ya,a3 as Ja,a4 as ee,a5 as Qa,a6 as et,a7 as at,a8 as tt,a9 as H,aa as he,ab as ve,ac as pe,ad as fe,ae as Y,af as ge,ag as ta,ah as sa,ai as ra,aj as st}from"./PieChart-DdrwvuuX.js";import{I as J}from"./IconTrendingUp-CoTcLOBw.js";import{I as ia}from"./IconCurrencyDollar-DCDJ1xJI.js";import{I as rt}from"./IconClock-98JF1g_z.js";import{I as it}from"./IconArrowLeft-0rt3x0IP.js";import{I as nt}from"./IconRefresh-U6chIQJB.js";import{I as lt}from"./IconTrendingDown--I_y3ylQ.js";import{I as ct}from"./IconChartPie-jWzm51Em.js";/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["path",{d:"M7 10h14l-4 -4",key:"svg-0"}],["path",{d:"M17 14h-14l4 4",key:"svg-1"}]],Ee=K("outline","arrows-exchange","ArrowsExchange",ot);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=[["path",{d:"M12 9m-6 0a6 6 0 1 0 12 0a6 6 0 1 0 -12 0",key:"svg-0"}],["path",{d:"M12 15l3.4 5.89l1.598 -3.233l3.598 .232l-3.4 -5.889",key:"svg-1"}],["path",{d:"M6.802 12l-3.4 5.89l3.598 -.233l1.598 3.232l3.4 -5.889",key:"svg-2"}]],Re=K("outline","award","Award",dt);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=[["path",{d:"M3 12h1m8 -9v1m8 8h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7",key:"svg-0"}],["path",{d:"M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3",key:"svg-1"}],["path",{d:"M9.7 17l4.6 0",key:"svg-2"}]],de=K("outline","bulb","Bulb",mt);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=[["path",{d:"M3 5m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 10l18 0",key:"svg-1"}],["path",{d:"M7 15l.01 0",key:"svg-2"}],["path",{d:"M11 15l2 0",key:"svg-3"}]],na=K("outline","credit-card","CreditCard",ut);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=[["path",{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M16 5.25l-8 4.5",key:"svg-4"}]],Le=K("outline","package","Package",xt);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=[["path",{d:"M15 11v.01",key:"svg-0"}],["path",{d:"M5.173 8.378a3 3 0 1 1 4.656 -1.377",key:"svg-1"}],["path",{d:"M16 4v3.803a6.019 6.019 0 0 1 2.658 3.197h1.341a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-1.342c-.336 .95 -.907 1.8 -1.658 2.473v2.027a1.5 1.5 0 0 1 -3 0v-.583a6.04 6.04 0 0 1 -1 .083h-4a6.04 6.04 0 0 1 -1 -.083v.583a1.5 1.5 0 0 1 -3 0v-2l0 -.027a6 6 0 0 1 4 -10.473h2.5l4.5 -3h0z",key:"svg-2"}]],me=K("outline","pig-money","PigMoney",ht);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]],Se=K("outline","target","Target",vt);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=[["path",{d:"M17 8v-3a1 1 0 0 0 -1 -1h-10a2 2 0 0 0 0 4h12a1 1 0 0 1 1 1v3m0 4v3a1 1 0 0 1 -1 1h-12a2 2 0 0 1 -2 -2v-12",key:"svg-0"}],["path",{d:"M20 12v4h-4a2 2 0 0 1 0 -4h4",key:"svg-1"}]],ft=K("outline","wallet","Wallet",pt);var gt=["points","className","baseLinePoints","connectNulls"];function U(){return U=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)({}).hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},U.apply(null,arguments)}function jt(t,a){if(t==null)return{};var s,r,n=bt(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],a.indexOf(s)===-1&&{}.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function bt(t,a){if(t==null)return{};var s={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(a.indexOf(r)!==-1)continue;s[r]=t[r]}return s}var Ce=t=>t&&t.x===+t.x&&t.y===+t.y,yt=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=[[]];return a.forEach(r=>{Ce(r)?s[s.length-1].push(r):s[s.length-1].length>0&&s.push([])}),Ce(a[0])&&s[s.length-1].push(a[0]),s[s.length-1].length<=0&&(s=s.slice(0,-1)),s},X=(t,a)=>{var s=yt(t);a&&(s=[s.reduce((n,i)=>[...n,...i],[])]);var r=s.map(n=>n.reduce((i,l,m)=>"".concat(i).concat(m===0?"M":"L").concat(l.x,",").concat(l.y),"")).join("");return s.length===1?"".concat(r,"Z"):r},Nt=(t,a,s)=>{var r=X(t,s);return"".concat(r.slice(-1)==="Z"?r.slice(0,-1):r,"L").concat(X(Array.from(a).reverse(),s).slice(1))},la=t=>{var{points:a,className:s,baseLinePoints:r,connectNulls:n}=t,i=jt(t,gt);if(!a||!a.length)return null;var l=F("recharts-polygon",s);if(r&&r.length){var m=i.stroke&&i.stroke!=="none",c=Nt(a,r,n);return o.createElement("g",{className:l},o.createElement("path",U({},R(i,!0),{fill:c.slice(-1)==="Z"?i.fill:"none",stroke:"none",d:c})),m?o.createElement("path",U({},R(i,!0),{fill:"none",d:X(a,n)})):null,m?o.createElement("path",U({},R(i,!0),{fill:"none",d:X(r,n)})):null)}var d=X(a,n);return o.createElement("path",U({},R(i,!0),{fill:d.slice(-1)==="Z"?i.fill:"none",className:l,d}))},je=(t,a,s)=>{switch(a){case"angleAxis":return xe(t,s);case"radiusAxis":return He(t,s);default:throw new Error("Unexpected axis type: ".concat(a))}},be=(t,a,s)=>{switch(a){case"angleAxis":return _a(t,s);case"radiusAxis":return Aa(t,s);default:throw new Error("Unexpected axis type: ".concat(a))}},Z=_([je,Ve,Na,be],wa),ca=_([se,Oa,Ea,ue],Ra),q=_([se,je,Ve,Z,Pa,be,Ue,ca,ue],ka);_([se,je,Z,be,Ue,ca,ue],La);var wt=(t,a)=>q(t,"angleAxis",a,!1),Pt=_([wt],t=>{if(t)return t.map(a=>a.coordinate)}),kt=(t,a)=>q(t,"radiusAxis",a,!1),At=_([kt],t=>{if(t)return t.map(a=>a.coordinate)}),_t=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function Ot(t,a){if(t==null)return{};var s,r,n=Et(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],a.indexOf(s)===-1&&{}.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function Et(t,a){if(t==null)return{};var s={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(a.indexOf(r)!==-1)continue;s[r]=t[r]}return s}function L(){return L=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)({}).hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},L.apply(null,arguments)}function Ie(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function ie(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?Ie(Object(s),!0).forEach(function(r){Rt(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ie(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function Rt(t,a,s){return(a=Lt(a))in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function Lt(t){var a=St(t,"string");return typeof a=="symbol"?a:a+""}function St(t,a){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Ct=(t,a,s,r)=>{var n="";return r.forEach((i,l)=>{var m=C(a,s,t,i);l?n+="L ".concat(m.x,",").concat(m.y):n+="M ".concat(m.x,",").concat(m.y)}),n+="Z",n},It=t=>{var{cx:a,cy:s,innerRadius:r,outerRadius:n,polarAngles:i,radialLines:l}=t;if(!i||!i.length||!l)return null;var m=ie({stroke:"#ccc"},V(t));return o.createElement("g",{className:"recharts-polar-grid-angle"},i.map(c=>{var d=C(a,s,r,c),h=C(a,s,n,c);return o.createElement("line",L({},m,{key:"line-".concat(c),x1:d.x,y1:d.y,x2:h.x,y2:h.y}))}))},$e=t=>{var{cx:a,cy:s,radius:r}=t,n=ie({stroke:"#ccc",fill:"none"},V(t));return o.createElement("circle",L({},n,{className:F("recharts-polar-grid-concentric-circle",t.className),cx:a,cy:s,r}))},Te=t=>{var{radius:a}=t,s=ie({stroke:"#ccc",fill:"none"},V(t));return o.createElement("path",L({},s,{className:F("recharts-polar-grid-concentric-polygon",t.className),d:Ct(a,t.cx,t.cy,t.polarAngles)}))},$t=t=>{var{polarRadius:a,gridType:s}=t;if(!a||!a.length)return null;var r=Math.max(...a),n=t.fill&&t.fill!=="none";return o.createElement("g",{className:"recharts-polar-grid-concentric"},n&&s==="circle"&&o.createElement($e,L({},t,{radius:r})),n&&s!=="circle"&&o.createElement(Te,L({},t,{radius:r})),a.map((i,l)=>{var m=l;return s==="circle"?o.createElement($e,L({key:m},t,{fill:"none",radius:i})):o.createElement(Te,L({key:m},t,{fill:"none",radius:i}))}))},oa=t=>{var a,s,r,n,i,l,m,c,{gridType:d="polygon",radialLines:h=!0,angleAxisId:u=0,radiusAxisId:v=0,cx:x,cy:p,innerRadius:g,outerRadius:w}=t,P=Ot(t,_t),f=S(re),N=ie({cx:(a=(s=f==null?void 0:f.cx)!==null&&s!==void 0?s:x)!==null&&a!==void 0?a:0,cy:(r=(n=f==null?void 0:f.cy)!==null&&n!==void 0?n:p)!==null&&r!==void 0?r:0,innerRadius:(i=(l=f==null?void 0:f.innerRadius)!==null&&l!==void 0?l:g)!==null&&i!==void 0?i:0,outerRadius:(m=(c=f==null?void 0:f.outerRadius)!==null&&c!==void 0?c:w)!==null&&m!==void 0?m:0},P),{polarAngles:b,polarRadius:j,outerRadius:I}=N,A=S(W=>Pt(W,u)),O=S(W=>At(W,v)),B=Array.isArray(b)?b:A,$=Array.isArray(j)?j:O;return I<=0||B==null||$==null?null:o.createElement("g",{className:"recharts-polar-grid"},o.createElement($t,L({gridType:d,radialLines:h},N,{polarAngles:B,polarRadius:$})),o.createElement(It,L({gridType:d,radialLines:h},N,{polarAngles:B,polarRadius:$})))};oa.displayName="PolarGrid";var da={},ma={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(s,r){if(s.length===0)return;let n=s[0],i=r(n);for(let l=1;l<s.length;l++){const m=s[l],c=r(m);c>i&&(i=c,n=m)}return n}t.maxBy=a})(ma);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=ma,s=Ze,r=Ge;function n(i,l){if(i!=null)return a.maxBy(Array.from(i),r.iteratee(l??s.identity))}t.maxBy=n})(da);var Tt=da.maxBy;const Dt=Ke(Tt);var ua={},xa={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(s,r){if(s.length===0)return;let n=s[0],i=r(n);for(let l=1;l<s.length;l++){const m=s[l],c=r(m);c<i&&(i=c,n=m)}return n}t.minBy=a})(xa);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=xa,s=Ze,r=Ge;function n(i,l){if(i!=null)return a.minBy(Array.from(i),r.iteratee(l??s.identity))}t.minBy=n})(ua);var Mt=ua.minBy;const zt=Ke(Mt);var Ft=["cx","cy","angle","axisLine"],Bt=["angle","tickFormatter","stroke","tick"];function Q(){return Q=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)({}).hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},Q.apply(null,arguments)}function De(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function D(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?De(Object(s),!0).forEach(function(r){ne(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):De(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function ne(t,a,s){return(a=Wt(a))in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function Wt(t){var a=Kt(t,"string");return typeof a=="symbol"?a:a+""}function Kt(t,a){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function ha(t,a){if(t==null)return{};var s,r,n=Vt(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],a.indexOf(s)===-1&&{}.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function Vt(t,a){if(t==null)return{};var s={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(a.indexOf(r)!==-1)continue;s[r]=t[r]}return s}var va="radiusAxis";function Ut(t){var a=qe();return o.useEffect(()=>(a(Sa(t)),()=>{a(Ca(t))})),null}var Ht=(t,a,s,r)=>{var{coordinate:n}=t;return C(s,r,n,a)},Gt=t=>{var a;switch(t){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a},Zt=(t,a,s,r)=>{var n=Dt(r,l=>l.coordinate||0),i=zt(r,l=>l.coordinate||0);return{cx:a,cy:s,startAngle:t,endAngle:t,innerRadius:i.coordinate||0,outerRadius:n.coordinate||0,clockWise:!1}},qt=(t,a)=>{var{cx:s,cy:r,angle:n,axisLine:i}=t,l=ha(t,Ft),m=a.reduce((u,v)=>[Math.min(u[0],v.coordinate),Math.max(u[1],v.coordinate)],[1/0,-1/0]),c=C(s,r,m[0],n),d=C(s,r,m[1],n),h=D(D(D({},V(l)),{},{fill:"none"},R(i,!1)),{},{x1:c.x,y1:c.y,x2:d.x,y2:d.y});return o.createElement("line",Q({className:"recharts-polar-radius-axis-line"},h))},Xt=(t,a,s)=>{var r;return o.isValidElement(t)?r=o.cloneElement(t,a):typeof t=="function"?r=t(a):r=o.createElement(Je,Q({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),r},Yt=(t,a)=>{var{angle:s,tickFormatter:r,stroke:n,tick:i}=t,l=ha(t,Bt),m=Gt(t.orientation),c=V(l),d=R(i,!1),h=a.map((u,v)=>{var x=Ht(u,t.angle,t.cx,t.cy),p=D(D(D(D({textAnchor:m,transform:"rotate(".concat(90-s,", ").concat(x.x,", ").concat(x.y,")")},c),{},{stroke:"none",fill:n},d),{},{index:v},x),{},{payload:u});return o.createElement(M,Q({className:F("recharts-polar-radius-axis-tick",Ye(i)),key:"tick-".concat(u.coordinate)},Xe(t,u,v)),Xt(i,p,r?r(u.value,v):u.value))});return o.createElement(M,{className:"recharts-polar-radius-axis-ticks"},h)},Jt=t=>{var{radiusAxisId:a}=t,s=S(re),r=S(c=>Z(c,"radiusAxis",a)),n=S(c=>q(c,"radiusAxis",a,!1));if(s==null||!n||!n.length)return null;var i=D(D(D({},t),{},{scale:r},s),{},{radius:s.outerRadius}),{tick:l,axisLine:m}=i;return o.createElement(M,{className:F("recharts-polar-radius-axis",va,i.className)},m&&qt(i,n),l&&Yt(i,n),o.createElement(Ia,Zt(i.angle,i.cx,i.cy,n),o.createElement($a,{label:i.label}),i.children))};class le extends o.PureComponent{render(){return o.createElement(o.Fragment,null,o.createElement(Ut,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),o.createElement(Jt,this.props))}}ne(le,"displayName","PolarRadiusAxis");ne(le,"axisType",va);ne(le,"defaultProps",Ta);var Qt=["children"];function z(){return z=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)({}).hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},z.apply(null,arguments)}function Me(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function T(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?Me(Object(s),!0).forEach(function(r){ce(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Me(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function ce(t,a,s){return(a=es(a))in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function es(t){var a=as(t,"string");return typeof a=="symbol"?a:a+""}function as(t,a){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function ts(t,a){if(t==null)return{};var s,r,n=ss(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],a.indexOf(s)===-1&&{}.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function ss(t,a){if(t==null)return{};var s={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(a.indexOf(r)!==-1)continue;s[r]=t[r]}return s}var ze=1e-5,rs=Math.cos(ae(45)),pa="angleAxis";function is(t){var a=qe(),s=o.useMemo(()=>{var{children:i}=t,l=ts(t,Qt);return l},[t]),r=S(i=>xe(i,s.id)),n=s===r;return o.useEffect(()=>(a(Da(s)),()=>{a(Ma(s))}),[a,s]),n?t.children:null}var ns=(t,a)=>{var{cx:s,cy:r,radius:n,orientation:i,tickSize:l}=a,m=l||8,c=C(s,r,n,t.coordinate),d=C(s,r,n+(i==="inner"?-1:1)*m,t.coordinate);return{x1:c.x,y1:c.y,x2:d.x,y2:d.y}},ls=(t,a)=>{var s=Math.cos(ae(-t.coordinate));return s>ze?a==="outer"?"start":"end":s<-ze?a==="outer"?"end":"start":"middle"},cs=t=>{var a=Math.cos(ae(-t.coordinate)),s=Math.sin(ae(-t.coordinate));return Math.abs(a)<=rs?s>0?"start":"end":"middle"},os=t=>{var{cx:a,cy:s,radius:r,axisLineType:n,axisLine:i,ticks:l}=t;if(!i)return null;var m=T(T({},V(t)),{},{fill:"none"},R(i,!1));if(n==="circle")return o.createElement(ea,z({className:"recharts-polar-angle-axis-line"},m,{cx:a,cy:s,r}));var c=l.map(d=>C(a,s,r,d.coordinate));return o.createElement(la,z({className:"recharts-polar-angle-axis-line"},m,{points:c}))},ds=t=>{var{tick:a,tickProps:s,value:r}=t;return a?o.isValidElement(a)?o.cloneElement(a,s):typeof a=="function"?a(s):o.createElement(Je,z({},s,{className:"recharts-polar-angle-axis-tick-value"}),r):null},ms=t=>{var{tick:a,tickLine:s,tickFormatter:r,stroke:n,ticks:i}=t,l=V(t),m=R(a,!1),c=T(T({},l),{},{fill:"none"},R(s,!1)),d=i.map((h,u)=>{var v=ns(h,t),x=ls(h,t.orientation),p=cs(h),g=T(T(T({},l),{},{textAnchor:x,verticalAnchor:p,stroke:"none",fill:n},m),{},{index:u,payload:h,x:v.x2,y:v.y2});return o.createElement(M,z({className:F("recharts-polar-angle-axis-tick",Ye(a)),key:"tick-".concat(h.coordinate)},Xe(t,h,u)),s&&o.createElement("line",z({className:"recharts-polar-angle-axis-tick-line"},c,v)),o.createElement(ds,{tick:a,tickProps:g,value:r?r(h.value,u):h.value}))});return o.createElement(M,{className:"recharts-polar-angle-axis-ticks"},d)},us=t=>{var{angleAxisId:a}=t,s=S(re),r=S(m=>Z(m,"angleAxis",a)),n=Qe(),i=S(m=>q(m,"angleAxis",a,n));if(s==null||!i||!i.length)return null;var l=T(T(T({},t),{},{scale:r},s),{},{radius:s.outerRadius});return o.createElement(M,{className:F("recharts-polar-angle-axis",pa,l.className)},o.createElement(os,z({},l,{ticks:i})),o.createElement(ms,z({},l,{ticks:i})))};class oe extends o.PureComponent{render(){return this.props.radius<=0?null:o.createElement(is,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},o.createElement(us,this.props))}}ce(oe,"displayName","PolarAngleAxis");ce(oe,"axisType",pa);ce(oe,"defaultProps",za);function Fe(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function te(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?Fe(Object(s),!0).forEach(function(r){xs(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Fe(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function xs(t,a,s){return(a=hs(a))in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function hs(t){var a=vs(t,"string");return typeof a=="symbol"?a:a+""}function vs(t,a){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var fa=(t,a)=>Z(t,"radiusAxis",a),ps=_([fa],t=>{if(t!=null)return{scale:t}}),fs=_([He,fa],(t,a)=>{if(!(t==null||a==null))return te(te({},t),{},{scale:a})}),gs=(t,a,s,r)=>q(t,"radiusAxis",a,r),ga=(t,a,s)=>xe(t,s),ja=(t,a,s)=>Z(t,"angleAxis",s),js=_([ga,ja],(t,a)=>{if(!(t==null||a==null))return te(te({},t),{},{scale:a})}),bs=(t,a,s,r)=>q(t,"angleAxis",s,r),ys=_([ga,ja,re],(t,a,s)=>{if(!(s==null||a==null))return{scale:a,type:t.type,dataKey:t.dataKey,cx:s.cx,cy:s.cy}}),Ns=(t,a,s,r,n)=>n,ws=_([se,fs,gs,js,bs],(t,a,s,r,n)=>Wa(t,"radiusAxis")?Ae(a,s,!1):Ae(r,n,!1)),Ps=_([Ba,Ns],(t,a)=>{if(t!=null){var s=t.find(r=>r.type==="radar"&&a===r.id);return s==null?void 0:s.dataKey}}),ks=_([ps,ys,Fa,Ps,ws],(t,a,s,r,n)=>{var{chartData:i,dataStartIndex:l,dataEndIndex:m}=s;if(!(t==null||a==null||i==null||n==null||r==null)){var c=i.slice(l,m+1);return Is({radiusAxis:t,angleAxis:a,displayedData:c,dataKey:r,bandSize:n})}}),As=["id"];function _s(t,a){if(t==null)return{};var s,r,n=Os(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],a.indexOf(s)===-1&&{}.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function Os(t,a){if(t==null)return{};var s={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(a.indexOf(r)!==-1)continue;s[r]=t[r]}return s}function Be(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function k(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?Be(Object(s),!0).forEach(function(r){ye(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Be(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function ye(t,a,s){return(a=Es(a))in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function Es(t){var a=Rs(t,"string");return typeof a=="symbol"?a:a+""}function Rs(t,a){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function G(){return G=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)({}).hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},G.apply(null,arguments)}function Ne(t,a){return t&&t!=="none"?t:a}var Ls=t=>{var{dataKey:a,name:s,stroke:r,fill:n,legendType:i,hide:l}=t;return[{inactive:l,dataKey:a,type:i,color:Ne(r,n),value:aa(s,a),payload:t}]};function Ss(t){var{dataKey:a,stroke:s,strokeWidth:r,fill:n,name:i,hide:l,tooltipType:m}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:s,strokeWidth:r,fill:n,nameKey:void 0,dataKey:a,name:aa(i,a),hide:l,type:m,color:Ne(s,n),unit:""}}}function Cs(t,a){var s;return o.isValidElement(t)?s=o.cloneElement(t,a):typeof t=="function"?s=t(a):s=o.createElement(ea,G({},a,{className:F("recharts-radar-dot",typeof t!="boolean"?t.className:"")})),s}function Is(t){var{radiusAxis:a,angleAxis:s,displayedData:r,dataKey:n,bandSize:i}=t,{cx:l,cy:m}=s,c=!1,d=[],h=s.type!=="number"?i??0:0;r.forEach((v,x)=>{var p=_e(v,s.dataKey,x),g=_e(v,n),w=s.scale(p)+h,P=Array.isArray(g)?Za(g):g,f=Oe(P)?void 0:a.scale(P);Array.isArray(g)&&g.length>=2&&(c=!0),d.push(k(k({},C(l,m,f,w)),{},{name:p,value:g,cx:l,cy:m,radius:f,angle:w,payload:v}))});var u=[];return c&&d.forEach(v=>{if(Array.isArray(v.value)){var x=v.value[0],p=Oe(x)?void 0:a.scale(x);u.push(k(k({},v),{},{radius:p},C(l,m,p,v.angle)))}else u.push(v)}),{points:d,isRange:c,baseLinePoints:u}}function $s(t){var{points:a,props:s}=t,{dot:r,dataKey:n}=s;if(!r)return null;var{id:i}=s,l=_s(s,As),m=V(l),c=R(r,!0),d=a.map((h,u)=>{var v=k(k(k({key:"dot-".concat(u),r:3},m),c),{},{dataKey:n,cx:h.x,cy:h.y,index:u,payload:h});return Cs(r,v)});return o.createElement(M,{className:"recharts-radar-dots"},d)}function Ts(t){var{showLabels:a,points:s,children:r}=t,n=s.map(i=>{var l={x:i.x,y:i.y,width:0,height:0};return k(k({},l),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return o.createElement(Ja,{value:a?n:null},r)}function Ds(t){var{points:a,baseLinePoints:s,props:r}=t;if(a==null)return null;var{shape:n,isRange:i,connectNulls:l}=r,m=h=>{var{onMouseEnter:u}=r;u&&u(r,h)},c=h=>{var{onMouseLeave:u}=r;u&&u(r,h)},d;return o.isValidElement(n)?d=o.cloneElement(n,k(k({},r),{},{points:a})):typeof n=="function"?d=n(k(k({},r),{},{points:a})):d=o.createElement(la,G({},R(r,!0),{onMouseEnter:m,onMouseLeave:c,points:a,baseLinePoints:i?s:null,connectNulls:l})),o.createElement(M,{className:"recharts-radar-polygon"},d,o.createElement($s,{props:r,points:a}))}var We=(t,a,s)=>(r,n)=>{var i=t&&t[Math.floor(n*a)];return i?k(k({},r),{},{x:ee(i.x,r.x,s),y:ee(i.y,r.y,s)}):k(k({},r),{},{x:ee(r.cx,r.x,s),y:ee(r.cy,r.y,s)})};function Ms(t){var{props:a,previousPointsRef:s,previousBaseLinePointsRef:r}=t,{points:n,baseLinePoints:i,isAnimationActive:l,animationBegin:m,animationDuration:c,animationEasing:d,onAnimationEnd:h,onAnimationStart:u}=a,v=s.current,x=r.current,p=v&&v.length/n.length,g=x&&x.length/i.length,w=qa(a,"recharts-radar-"),[P,f]=o.useState(!1),N=!P,b=o.useCallback(()=>{typeof h=="function"&&h(),f(!1)},[h]),j=o.useCallback(()=>{typeof u=="function"&&u(),f(!0)},[u]);return o.createElement(Ts,{showLabels:N,points:n},o.createElement(Xa,{animationId:w,begin:m,duration:c,isActive:l,easing:d,key:"radar-".concat(w),onAnimationEnd:b,onAnimationStart:j},I=>{var A=I===1?n:n.map(We(v,p,I)),O=I===1?i:i==null?void 0:i.map(We(x,g,I));return I>0&&(s.current=A,r.current=O),o.createElement(Ds,{points:A,baseLinePoints:O,props:a})}),o.createElement(Ya,{label:a.label}),a.children)}function zs(t){var a=o.useRef(void 0),s=o.useRef(void 0);return o.createElement(Ms,{props:t,previousPointsRef:a,previousBaseLinePointsRef:s})}var Fs={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Qa.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class Bs extends o.PureComponent{render(){var{hide:a,className:s,points:r}=this.props;if(a||r==null)return null;var n=F("recharts-radar",s);return o.createElement(o.Fragment,null,o.createElement(M,{className:n},o.createElement(zs,this.props)),o.createElement(Ga,{points:r,mainColor:Ne(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function Ws(t){var a=Qe(),s=S(r=>ks(r,t.radiusAxisId,t.angleAxisId,a,t.id));return o.createElement(Bs,G({},t,{points:s==null?void 0:s.points,baseLinePoints:s==null?void 0:s.baseLinePoints,isRange:s==null?void 0:s.isRange}))}class we extends o.PureComponent{render(){return o.createElement(Ka,{id:this.props.id,type:"radar"},a=>o.createElement(o.Fragment,null,o.createElement(Va,{type:"radar",id:a,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),o.createElement(Ua,{legendPayload:Ls(this.props)}),o.createElement(Ha,{fn:Ss,args:this.props}),o.createElement(Ws,G({},this.props,{id:a}))))}}ye(we,"displayName","Radar");ye(we,"defaultProps",Fs);var Ks=["axis"],Vs={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Us=o.forwardRef((t,a)=>{var s=et(t,Vs);return o.createElement(at,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ks,tooltipPayloadSearcher:tt,categoricalChartProps:s,ref:a})});function Hs({customer:t,profitability:a}){const s=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"ZMW",minimumFractionDigits:0,maximumFractionDigits:0}).format(l);o.useEffect(()=>{const l=new CustomEvent("tooltipReinitialize");document.dispatchEvent(l)},[]);const r=[{name:"Interest Earned",value:a.interest_earned,color:"#10B981"},{name:"Interest Paid",value:-a.interest_paid,color:"#EF4444"},{name:"Operational Costs",value:-a.operational_costs,color:"#F59E0B"},{name:"Net Profitability",value:a.profitability,color:a.profitability>=0?"#10B981":"#EF4444"}],n=[{name:"Interest Earned",value:a.interest_earned,percentage:(a.interest_earned/(a.interest_earned+a.interest_paid+a.operational_costs)*100).toFixed(1)},{name:"Interest Paid",value:a.interest_paid,percentage:(a.interest_paid/(a.interest_earned+a.interest_paid+a.operational_costs)*100).toFixed(1)},{name:"Operational Costs",value:a.operational_costs,percentage:(a.operational_costs/(a.interest_earned+a.interest_paid+a.operational_costs)*100).toFixed(1)}],i=["#10B981","#EF4444","#F59E0B"];return e.jsxs("div",{className:"row row-deck row-cards",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title text-dark fw-bold d-flex align-items-center",children:["Profitability Breakdown",e.jsx(y,{size:16,className:"ms-2 text-muted","data-tooltip":"Shows the breakdown of revenue and costs that contribute to net profitability:\\n\\n• Interest Earned: Loan amount × Interest rate (annual)\\n• Interest Paid: Deposit balance × Interest rate (annual, default 2%)\\n• Operational Costs: Base cost (50 per product) + loan management (150) + deposit maintenance (25) + NPL risk costs (0.1% of NPL exposure)\\n• Net Profitability: Interest Earned - Interest Paid - Operational Costs"})]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{style:{height:"300px"},children:e.jsx(H,{width:"100%",height:"100%",children:e.jsxs(he,{data:r,children:[e.jsx(ve,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"name",angle:-45,textAnchor:"end",height:80,fontSize:12,tick:{fill:"#212529",fontSize:11}}),e.jsx(fe,{tickFormatter:l=>s(l),fontSize:12,tick:{fill:"#212529",fontSize:11}}),e.jsx(Y,{formatter:l=>[s(l),"Amount"],labelStyle:{color:"#212529",fontWeight:"600"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #dee2e6",borderRadius:"6px",color:"#212529"}}),e.jsx(ge,{dataKey:"value",fill:l=>l.color,radius:[4,4,0,0]})]})})})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title text-dark fw-bold d-flex align-items-center",children:["Revenue & Cost Distribution",e.jsx(y,{size:16,className:"ms-2 text-muted","data-tooltip":"Shows the percentage distribution of total revenue and costs. Interest Earned represents revenue from loans, Interest Paid represents costs for deposits, and Operational Costs represent other business expenses."})]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{style:{height:"300px",padding:"10px"},children:e.jsx(H,{width:"100%",height:"100%",children:e.jsxs(ta,{margin:{top:10,right:20,bottom:70,left:20},children:[e.jsx(sa,{data:n,cx:"50%",cy:"40%",labelLine:!1,label:l=>{const m=n.reduce((d,h)=>d+h.value,0),c=(l.value/m*100).toFixed(1);return parseFloat(c)>=5?`${l.name}: ${c}%`:""},outerRadius:65,fill:"#8884d8",dataKey:"value",labelStyle:{fill:"#212529",fontSize:"11px",fontWeight:"600"},children:n.map((l,m)=>e.jsx(ra,{fill:i[m%i.length]},`cell-${m}`))}),e.jsx(Y,{formatter:(l,m)=>{const c=n.reduce((h,u)=>h+u.value,0),d=(l/c*100).toFixed(1);return[`${s(l)} (${d}%)`,"Amount"]},labelStyle:{color:"#212529",fontWeight:"600"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #dee2e6",borderRadius:"6px",color:"#212529"}}),e.jsx(st,{verticalAlign:"bottom",height:60,iconType:"circle",formatter:(l,m)=>{const c=n.find(d=>d.name===l);if(c){const d=n.reduce((u,v)=>u+v.value,0),h=(c.value/d*100).toFixed(1);return`${l} (${h}%)`}return l},wrapperStyle:{paddingTop:"10px",fontSize:"12px",fontWeight:"500"}})]})})})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title text-dark fw-bold d-flex align-items-center",children:["Key Profitability Metrics",e.jsx(y,{size:16,className:"ms-2 text-muted","data-tooltip":"Detailed breakdown of profitability components: Interest Earned (revenue from loans), Interest Paid (costs for deposits), Operational Costs (other expenses), Net Profitability (final result), and Profitability Margin (profit as percentage of total revenue)."})]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[e.jsxs("span",{className:"fw-medium text-dark d-flex align-items-center",children:["Interest Earned",e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"Annual interest revenue: Sum of (Loan amount × Interest rate) for all loan products"})]}),e.jsx("span",{className:"text-success fw-semibold",children:s(a.interest_earned)})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[e.jsxs("span",{className:"fw-medium text-dark d-flex align-items-center",children:["Interest Paid",e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"Annual interest expense: Sum of (Deposit balance × Interest rate) for all deposit accounts"})]}),e.jsxs("span",{className:"text-danger fw-semibold",children:["-",s(a.interest_paid)]})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[e.jsxs("span",{className:"fw-medium text-dark d-flex align-items-center",children:["Operational Costs",e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"Annual operational costs: Base cost (50 per product) + loan management (150) + deposit maintenance (25) + NPL risk costs (0.1% of NPL exposure)"})]}),e.jsxs("span",{className:"text-warning fw-semibold",children:["-",s(a.operational_costs)]})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 bg-primary bg-opacity-10 rounded border border-primary",children:[e.jsxs("span",{className:"fw-bold text-dark d-flex align-items-center",children:["Net Profitability",e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"Final profit/loss calculation: Interest Earned - Interest Paid - Operational Costs"})]}),e.jsx("span",{className:`fw-bold fs-5 ${a.profitability>=0?"text-success":"text-danger"}`,children:s(a.profitability)})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[e.jsxs("span",{className:"fw-medium text-dark d-flex align-items-center",children:["Profitability Margin",e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"Profitability margin: (Net Profitability / Interest Earned) × 100 - shows profit as percentage of interest revenue"})]}),e.jsxs("span",{className:`fw-semibold ${a.profitability_margin>=0?"text-success":"text-danger"}`,children:[a.profitability_margin.toFixed(2),"%"]})]})})]})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title text-dark fw-bold d-flex align-items-center",children:["Financial Summary",e.jsx(y,{size:16,className:"ms-2 text-muted","data-tooltip":"Overview of customer's financial position: Total Loans (outstanding loan balances), Total Deposits (deposit account balances), NPL Exposure (non-performing loan amounts), NPL Ratio (percentage of loans that are non-performing), and Risk Level (overall risk assessment)."})]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"text-center p-3 bg-primary bg-opacity-10 rounded",children:[e.jsxs("p",{className:"text-muted mb-1 d-flex align-items-center justify-content-center",children:["Total Loans",e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"Total outstanding loan balances: Sum of 'amount' or 'outstanding_balance' fields from all products with category 'Loan'"})]}),e.jsx("p",{className:"h4 fw-bold text-primary mb-0",children:s(a.total_loans_outstanding)})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"text-center p-3 bg-info bg-opacity-10 rounded",children:[e.jsxs("p",{className:"text-muted mb-1 d-flex align-items-center justify-content-center",children:["Total Deposits",e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"Total deposit balances: Sum of 'amount' or 'balance' fields from all products with category 'Deposit' or 'Account'"})]}),e.jsx("p",{className:"h4 fw-bold text-info mb-0",children:s(a.total_deposits)})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"text-center p-3 bg-danger bg-opacity-10 rounded",children:[e.jsxs("p",{className:"text-muted mb-1 d-flex align-items-center justify-content-center",children:["NPL Exposure",e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"Total amount of non-performing loans: Loans with status 'npl' or 'non_performing', or loans with 90+ days past due"})]}),e.jsx("p",{className:"h4 fw-bold text-dark mb-0",children:s(a.npl_exposure)})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"text-center p-3 bg-warning bg-opacity-10 rounded",children:[e.jsxs("p",{className:"text-muted mb-1 d-flex align-items-center justify-content-center",children:["NPL Ratio",e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"NPL Ratio: (NPL Exposure / Total Loans Outstanding) × 100 - indicates the percentage of loan portfolio that is non-performing"})]}),e.jsxs("p",{className:"h4 fw-bold text-dark mb-0",children:[a.npl_ratio.toFixed(2),"%"]})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"text-center p-3 bg-success bg-opacity-10 rounded",children:[e.jsxs("p",{className:"text-muted mb-1 d-flex align-items-center justify-content-center",children:["Risk Level",e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"Risk assessment based on NPL ratio: Low (<2%), Medium (2-5%), High (>5%)"})]}),e.jsx("p",{className:`h4 fw-bold mb-0 ${a.risk_level==="Low"||a.risk_level==="Medium","text-dark"}`,children:a.risk_level})]})})]})})]})})]})}function Gs({customer:t,productsByCategory:a}){const s=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"ZMW",minimumFractionDigits:0,maximumFractionDigits:0}).format(c),r={Loan:na,Deposit:me,Account:ft,Transaction:Ee,Other:Le},n={Loan:"#3B82F6",Deposit:"#8B5CF6",Account:"#10B981",Transaction:"#F59E0B",Other:"#6B7280"},i=Object.entries(a).filter(([c,d])=>d.count>0).map(([c,d])=>({name:c,count:d.count,value:d.total_value,color:n[c]})),l=i.reduce((c,d)=>c+d.value,0),m=i.reduce((c,d)=>c+d.count,0);return e.jsxs("div",{className:"row row-deck row-cards",children:[e.jsx("div",{className:"col-lg-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Total Products"})}),e.jsxs("div",{className:"card-body text-center",children:[e.jsx(Le,{size:48,className:"text-primary mb-3"}),e.jsx("p",{className:"text-3xl font-bold text-dark mb-0",children:m})]})]})}),e.jsx("div",{className:"col-lg-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Portfolio Value"})}),e.jsxs("div",{className:"card-body text-center",children:[e.jsx(me,{size:48,className:"text-success mb-3"}),e.jsx("p",{className:"text-3xl font-bold text-dark mb-0",children:s(l)})]})]})}),e.jsx("div",{className:"col-lg-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Categories"})}),e.jsxs("div",{className:"card-body text-center",children:[e.jsx(Ee,{size:48,className:"text-info mb-3"}),e.jsx("p",{className:"text-3xl font-bold text-dark mb-0",children:i.length})]})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Portfolio Distribution by Value"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{style:{height:"300px"},children:e.jsx(H,{width:"100%",height:"100%",children:e.jsxs(ta,{children:[e.jsx(sa,{data:i,cx:"50%",cy:"50%",labelLine:!1,label:({name:c,value:d})=>`${c}: ${s(d)}`,outerRadius:80,fill:"#8884d8",dataKey:"value",labelStyle:{fill:"#212529",fontSize:"12px",fontWeight:"600"},children:i.map((c,d)=>e.jsx(ra,{fill:c.color},`cell-${d}`))}),e.jsx(Y,{formatter:c=>[s(c),"Value"],labelStyle:{color:"#212529",fontWeight:"600"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #dee2e6",borderRadius:"6px",color:"#212529"}})]})})})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Product Count by Category"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{style:{height:"300px"},children:e.jsx(H,{width:"100%",height:"100%",children:e.jsxs(he,{data:i,children:[e.jsx(ve,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"name",fontSize:12,tick:{fill:"#212529",fontSize:11}}),e.jsx(fe,{fontSize:12,tick:{fill:"#212529",fontSize:11}}),e.jsx(Y,{labelStyle:{color:"#212529",fontWeight:"600"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #dee2e6",borderRadius:"6px",color:"#212529"}}),e.jsx(ge,{dataKey:"count",fill:"#3B82F6",radius:[4,4,0,0]})]})})})})]})}),Object.entries(a).map(([c,d])=>{const h=r[c],u=n[c];return e.jsx("div",{className:"col-lg-4",children:e.jsxs("div",{className:`card ${d.count===0?"opacity-50":""}`,children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title text-dark fw-bold d-flex align-items-center",children:[e.jsx(h,{size:20,className:"me-2",style:{color:u}}),c,e.jsx("span",{className:"badge bg-secondary ms-auto",children:d.count})]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[e.jsx("span",{className:"fw-medium text-dark",children:"Total Value"}),e.jsx("span",{className:"fw-semibold text-dark",children:s(d.total_value)})]})}),d.count>0&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[e.jsx("span",{className:"fw-medium text-dark",children:"Avg. Value"}),e.jsx("span",{className:"fw-semibold text-dark",children:s(d.total_value/d.count)})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[e.jsx("span",{className:"fw-medium text-dark",children:"Portfolio %"}),e.jsxs("span",{className:"fw-semibold text-dark",children:[l>0?(d.total_value/l*100).toFixed(1):0,"%"]})]})})]}),d.products&&d.products.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-top",children:[e.jsx("p",{className:"text-sm fw-medium text-dark mb-2",children:"Recent Products:"}),e.jsxs("div",{className:"space-y-1",children:[d.products.slice(0,3).map((v,x)=>{var p,g,w;return e.jsxs("div",{className:"text-xs text-muted d-flex justify-content-between",children:[e.jsx("span",{className:"text-truncate me-2",children:((p=v.product)==null?void 0:p.name)||"Unknown Product"}),e.jsx("span",{className:"fw-medium text-dark",children:s(((g=v.data)==null?void 0:g.amount)||((w=v.data)==null?void 0:w.balance)||0)})]},x)}),d.products.length>3&&e.jsxs("p",{className:"text-xs text-muted fst-italic",children:["+",d.products.length-3," more products"]})]})]})]})]})},c)})]})}function Zs({customer:t,nplExposure:a,profitability:s}){const r=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"ZMW",minimumFractionDigits:0,maximumFractionDigits:0}).format(c),n=c=>{switch(c){case"Low":return"bg-success text-white";case"Medium":return"bg-warning text-white";case"High":return"bg-danger text-white";default:return"bg-secondary text-white"}},i=[{name:"Total Loans",value:a.total_loans_outstanding,color:"#3385ff"},{name:"NPL Exposure",value:a.npl_exposure,color:"#e75c2d"},{name:"Performing Loans",value:a.performing_loans,color:"#10B981"}],m=(c=>c<2?{level:"Low",description:"Excellent credit quality",icon:ke,color:"green"}:c<5?{level:"Medium",description:"Acceptable credit quality",icon:E,color:"yellow"}:{level:"High",description:"Requires attention",icon:E,color:"red"})(a.npl_ratio);return e.jsxs("div",{className:"row row-deck row-cards",children:[e.jsx("div",{className:"col-lg-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Risk Level"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(m.icon,{size:32,className:`text-${m.color==="green"?"success":m.color==="yellow"?"warning":"danger"}`})}),e.jsxs("div",{className:"ms-3",children:[e.jsx("span",{className:`badge ${n(a.risk_level)}`,children:a.risk_level}),e.jsx("p",{className:"text-xs text-muted mt-1 mb-0",children:m.description})]})]})})]})}),e.jsx("div",{className:"col-lg-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"NPL Exposure"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(E,{size:32,className:"text-danger"})}),e.jsxs("div",{className:"ms-3",children:[e.jsx("p",{className:"text-2xl fw-semibold text-danger mb-0",children:r(a.npl_exposure)}),e.jsxs("p",{className:"text-xs text-muted mb-0",children:[a.npl_product_count," products"]})]})]})})]})}),e.jsx("div",{className:"col-lg-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"NPL Ratio"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{size:32,className:"text-warning"})}),e.jsxs("div",{className:"ms-3",children:[e.jsxs("p",{className:`text-2xl fw-semibold mb-0 ${a.risk_level==="Low"?"text-success":a.risk_level==="Medium"?"text-warning":"text-danger"}`,children:[a.npl_ratio.toFixed(2),"%"]}),e.jsx("p",{className:"text-xs text-muted mb-0",children:"Industry avg: 3.5%"})]})]})})]})}),e.jsx("div",{className:"col-lg-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Performing Loans"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ia,{size:32,className:"text-success"})}),e.jsxs("div",{className:"ms-3",children:[e.jsx("p",{className:"text-2xl fw-semibold text-success mb-0",children:r(a.performing_loans)}),e.jsxs("p",{className:"text-xs text-muted mb-0",children:[(a.performing_loans/a.total_loans_outstanding*100).toFixed(1),"% of total"]})]})]})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Loan Portfolio Risk Breakdown"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{style:{height:"300px"},children:e.jsx(H,{width:"100%",height:"100%",children:e.jsxs(he,{data:i,children:[e.jsx(ve,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"name",fontSize:12,tick:{fill:"#212529",fontSize:11}}),e.jsx(fe,{tickFormatter:c=>r(c),fontSize:12,tick:{fill:"#212529",fontSize:11}}),e.jsx(Y,{formatter:c=>[r(c),"Amount"],labelStyle:{color:"#212529",fontWeight:"600"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #dee2e6",borderRadius:"6px",color:"#212529"}}),e.jsx(ge,{dataKey:"value",fill:c=>c.color,radius:[4,4,0,0]})]})})})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Risk Indicators"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[e.jsx("span",{className:"fw-medium text-dark",children:"NPL Ratio"}),e.jsxs("div",{className:"text-end",children:[e.jsxs("span",{className:`fw-semibold ${a.risk_level==="Low"?"text-success":a.risk_level==="Medium"?"text-warning":"text-danger"}`,children:[a.npl_ratio.toFixed(2),"%"]}),e.jsx("p",{className:"text-xs text-muted mb-0",children:"Target: < 2%"})]})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[e.jsx("span",{className:"fw-medium text-dark",children:"Coverage Ratio"}),e.jsxs("div",{className:"text-end",children:[e.jsxs("span",{className:"fw-semibold text-primary",children:[a.total_loans_outstanding>0?(a.performing_loans/a.total_loans_outstanding*100).toFixed(1):0,"%"]}),e.jsx("p",{className:"text-xs text-muted mb-0",children:"Performing loans"})]})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[e.jsx("span",{className:"fw-medium text-dark",children:"Risk-Adjusted Return"}),e.jsxs("div",{className:"text-end",children:[e.jsxs("span",{className:`fw-semibold ${s.profitability>=0?"text-success":"text-danger"}`,children:[a.total_loans_outstanding>0?(s.profitability/a.total_loans_outstanding*100).toFixed(2):0,"%"]}),e.jsx("p",{className:"text-xs text-muted mb-0",children:"ROA adjusted"})]})]})})]})})]})}),a.npl_products&&a.npl_products.length>0&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title text-dark fw-bold d-flex align-items-center",children:[e.jsx(E,{size:20,className:"text-danger me-2"}),"Non-Performing Loans Detail"]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-dark",children:[e.jsx("th",{className:"text-white",children:"Product"}),e.jsx("th",{className:"text-white",children:"Amount"}),e.jsx("th",{className:"text-white",children:"Days Past Due"}),e.jsx("th",{className:"text-white",children:"Status"})]})}),e.jsx("tbody",{children:a.npl_products.map((c,d)=>e.jsxs("tr",{children:[e.jsx("td",{className:"fw-medium text-dark",children:c.product_name}),e.jsx("td",{className:"text-dark",children:r(c.amount)}),e.jsx("td",{className:"text-dark",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(rt,{size:16,className:"text-warning me-1"}),c.days_past_due," days"]})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-danger text-white",children:c.status.toUpperCase()})})]},d))})]})})})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Risk Management Recommendations"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[a.npl_ratio>5&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"alert alert-danger d-flex align-items-center",children:[e.jsx(E,{size:20,className:"me-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"High Risk Alert:"})," NPL ratio exceeds 5%. Consider immediate review of credit terms and collection procedures."]})]})}),a.npl_ratio>2&&a.npl_ratio<=5&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"alert alert-warning d-flex align-items-center",children:[e.jsx(E,{size:20,className:"me-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Medium Risk:"})," NPL ratio is above target. Monitor closely and consider enhanced collection efforts."]})]})}),a.npl_ratio<=2&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"alert alert-success d-flex align-items-center",children:[e.jsx(ke,{size:20,className:"me-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Low Risk:"})," Customer maintains excellent credit quality. Consider for premium product offerings."]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"p-3 bg-primary bg-opacity-10 rounded",children:[e.jsx("h4",{className:"fw-semibold text-primary mb-2",children:"Recommended Actions"}),e.jsxs("ul",{className:"text-sm text-dark mb-0",children:[a.npl_ratio>5&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Immediate credit review"}),e.jsx("li",{children:"• Enhanced monitoring"}),e.jsx("li",{children:"• Collection acceleration"})]}),a.npl_ratio>2&&a.npl_ratio<=5&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Regular portfolio review"}),e.jsx("li",{children:"• Proactive customer contact"}),e.jsx("li",{children:"• Payment plan options"})]}),a.npl_ratio<=2&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Maintain current terms"}),e.jsx("li",{children:"• Consider credit increases"}),e.jsx("li",{children:"• Cross-sell opportunities"})]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"p-3 bg-info bg-opacity-10 rounded",children:[e.jsx("h4",{className:"fw-semibold text-info mb-2",children:"Monitoring Metrics"}),e.jsxs("ul",{className:"text-sm text-dark mb-0",children:[e.jsx("li",{children:"• Monthly NPL ratio tracking"}),e.jsx("li",{children:"• Payment behavior analysis"}),e.jsx("li",{children:"• Early warning indicators"}),e.jsx("li",{children:"• Profitability impact assessment"})]})]})})]})})]})})]})}function qs({customer:t,profitability:a,nplExposure:s}){const r=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"ZMW",minimumFractionDigits:0,maximumFractionDigits:0}).format(u),i=(()=>{const u=a.profitability>0?Math.min(100,Math.max(0,a.profitability/Math.max(a.profitability,1e4)*100)):0,v=a.risk_level==="Low"?90:a.risk_level==="Medium"?60:30,x=a.total_loans_outstanding+a.total_deposits,p=x>0?Math.min(100,x/Math.max(x,1e4)*100):0,g=t.is_active?t.tenure_years>5?90:t.tenure_years>2?70:50:20;return{profitability:u,risk:v,portfolio:p,loyalty:g,overall:(u+v+p+g)/4}})(),l=[{subject:"Profitability",A:i.profitability,fullMark:100},{subject:"Risk Management",A:i.risk,fullMark:100},{subject:"Portfolio Size",A:i.portfolio,fullMark:100},{subject:"Loyalty",A:i.loyalty,fullMark:100}],c=(()=>{const u=[],v=Math.max(5e3,a.profitability*.8);a.profitability>v?u.push({type:"positive",icon:Re,title:"High Value Customer",description:`This customer generates ${r(a.profitability)} in annual profitability, placing them in the top tier.`,recommendation:"Consider offering premium services and exclusive benefits to retain this valuable relationship."}):a.profitability<0?u.push({type:"negative",icon:E,title:"Unprofitable Relationship",description:`Customer is currently generating a loss of ${r(Math.abs(a.profitability))}.`,recommendation:"Review pricing structure and consider fee adjustments or service optimization."}):a.profitability<v*.3&&u.push({type:"warning",icon:E,title:"Low Profitability",description:`Customer profitability of ${r(a.profitability)} is below optimal levels.`,recommendation:"Consider upselling additional services or reviewing fee structure to improve profitability."}),a.risk_level==="High"?u.push({type:"warning",icon:E,title:"High Risk Profile",description:`NPL ratio of ${a.npl_ratio.toFixed(2)}% indicates elevated credit risk.`,recommendation:"Implement enhanced monitoring and consider risk mitigation strategies."}):a.risk_level==="Low"&&u.push({type:"positive",icon:Se,title:"Excellent Credit Quality",description:`Low NPL ratio of ${a.npl_ratio.toFixed(2)}% demonstrates strong creditworthiness.`,recommendation:"Ideal candidate for credit limit increases and new product offerings."});const x=a.total_deposits>0?a.total_loans_outstanding/a.total_deposits*100:0;return x>200?u.push({type:"opportunity",icon:de,title:"Deposit Growth Opportunity",description:`High loan-to-deposit ratio of ${x.toFixed(0)}% suggests potential for deposit growth.`,recommendation:"Target with deposit products and savings incentives to improve funding mix."}):x<50&&a.total_deposits>1e4&&u.push({type:"opportunity",icon:de,title:"Lending Opportunity",description:"Strong deposit base with low lending utilization presents growth opportunity.",recommendation:"Proactively offer loan products and credit facilities."}),a.profitability_margin>15&&u.push({type:"positive",icon:J,title:"High Margin Customer",description:`Profitability margin of ${a.profitability_margin.toFixed(2)}% exceeds industry benchmarks.`,recommendation:"Maintain current service levels and explore additional revenue opportunities."}),u.slice(0,4)})(),d=u=>{switch(u){case"positive":return"alert-success";case"negative":return"alert-danger";case"warning":return"alert-warning";case"opportunity":return"alert-info";default:return"alert-secondary"}},h=u=>{switch(u){case"positive":return"text-success";case"negative":return"text-danger";case"warning":return"text-warning";case"opportunity":return"text-info";default:return"text-secondary"}};return e.jsxs("div",{className:"row row-deck row-cards",children:[e.jsx("div",{className:"col-lg-2",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Overall Score"})}),e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"text-3xl fw-bold text-primary mb-2",children:i.overall.toFixed(0)}),e.jsx("span",{className:`badge ${i.overall>=80?"bg-success text-white":i.overall>=60?"bg-warning text-white":"bg-danger text-white"}`,children:i.overall>=80?"Excellent":i.overall>=60?"Good":"Needs Attention"})]})]})}),e.jsx("div",{className:"col-lg-2",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Profitability"})}),e.jsx("div",{className:"card-body text-center",children:e.jsx("div",{className:"text-2xl fw-bold text-success mb-0",children:i.profitability.toFixed(0)})})]})}),e.jsx("div",{className:"col-lg-2",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Risk Score"})}),e.jsx("div",{className:"card-body text-center",children:e.jsx("div",{className:"text-2xl fw-bold text-primary mb-0",children:i.risk.toFixed(0)})})]})}),e.jsx("div",{className:"col-lg-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Portfolio"})}),e.jsx("div",{className:"card-body text-center",children:e.jsx("div",{className:"text-2xl fw-bold text-info mb-0",children:i.portfolio.toFixed(0)})})]})}),e.jsx("div",{className:"col-lg-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Loyalty"})}),e.jsx("div",{className:"card-body text-center",children:e.jsx("div",{className:"text-2xl fw-bold text-warning mb-0",children:i.loyalty.toFixed(0)})})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Customer Performance Profile"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{style:{height:"400px"},children:e.jsx(H,{width:"100%",height:"100%",children:e.jsxs(Us,{data:l,children:[e.jsx(oa,{}),e.jsx(oe,{dataKey:"subject"}),e.jsx(le,{angle:90,domain:[0,100]}),e.jsx(we,{name:"Customer Score",dataKey:"A",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.3,strokeWidth:2})]})})})})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title text-dark fw-bold d-flex align-items-center",children:[e.jsx(de,{size:20,className:"text-warning me-2"}),"Key Insights & Recommendations"]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"row g-3",children:c.map((u,v)=>{const x=u.icon;return e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:`alert ${d(u.type)} d-flex align-items-start`,children:[e.jsx(x,{size:20,className:`me-2 mt-1 ${h(u.type)}`}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h4",{className:`fw-semibold mb-2 ${h(u.type)}`,children:u.title}),e.jsx("p",{className:"text-sm mb-3 text-dark",children:u.description}),e.jsxs("div",{className:"bg-light bg-opacity-75 p-2 rounded text-xs",children:[e.jsx("strong",{className:"text-dark",children:"Recommendation:"})," ",e.jsx("span",{className:"text-dark",children:u.recommendation})]})]})]})},v)})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Revenue Impact"})}),e.jsxs("div",{className:"card-body text-center",children:[e.jsx(J,{size:48,className:"text-success mb-3"}),e.jsx("h3",{className:"fw-semibold text-success mb-1",children:"Revenue Impact"}),e.jsx("p",{className:"text-2xl fw-bold text-success mb-0",children:r(a.interest_earned)}),e.jsx("p",{className:"text-sm text-muted mb-0",children:"Annual interest earned"})]})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Efficiency Ratio"})}),e.jsxs("div",{className:"card-body text-center",children:[e.jsx(Se,{size:48,className:"text-primary mb-3"}),e.jsx("h3",{className:"fw-semibold text-primary mb-1",children:"Efficiency Ratio"}),e.jsxs("p",{className:"text-2xl fw-bold text-primary mb-0",children:[a.interest_earned>0?(a.operational_costs/a.interest_earned*100).toFixed(1):0,"%"]}),e.jsx("p",{className:"text-sm text-muted mb-0",children:"Cost-to-income ratio"})]})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Customer Value"})}),e.jsxs("div",{className:"card-body text-center",children:[e.jsx(Re,{size:48,className:"text-info mb-3"}),e.jsx("h3",{className:"fw-semibold text-info mb-1",children:"Customer Value"}),e.jsx("p",{className:"text-2xl fw-bold text-info mb-0",children:r(a.total_loans_outstanding+a.total_deposits)}),e.jsx("p",{className:"text-sm text-muted mb-0",children:"Total relationship value"})]})]})})]})}function nr({customer:t,profitability:a,nplExposure:s,productsByCategory:r}){const[n,i]=o.useState(!1),[l,m]=o.useState(a),c=x=>{if(!r)return"";let p="";try{switch(x){case"loans":const g=Object.entries(r).filter(([f,N])=>Array.isArray(N)&&N.some(b=>b.product&&b.product.category==="Loan"));g.length>0?(p=`Aggregated from:
`,g.forEach(([f,N])=>{N.filter(j=>j.product&&j.product.category==="Loan").forEach(j=>{p+=`• ${j.product.name}: ${d(j.amount)} (${j.status})
`})})):p="No loan products found";break;case"deposits":const w=Object.entries(r).filter(([f,N])=>Array.isArray(N)&&N.some(b=>b.product&&b.product.category==="Deposit"));w.length>0?(p=`Aggregated from:
`,w.forEach(([f,N])=>{N.filter(j=>j.product&&j.product.category==="Deposit").forEach(j=>{p+=`• ${j.product.name}: ${d(j.amount)} (${j.status})
`})})):p="No deposit products found";break;case"npl":const P=Object.entries(r).flatMap(([f,N])=>Array.isArray(N)?N:[]).filter(f=>f.status==="npl");P.length>0?(p=`NPL Products:
`,P.forEach(f=>{p+=`• ${f.product?f.product.name:"Unknown Product"}: ${d(f.amount)}
`})):p="No NPL products found";break;default:p=""}}catch(g){console.warn("Error generating tooltip content:",g),p="Data not available"}return p.trim()};o.useEffect(()=>{let x=null;const p=b=>{const j=b.target,I=j.getAttribute("data-tooltip");if(!I)return;x&&(document.body.removeChild(x),x=null);const A=document.createElement("div");A.className="custom-tooltip",A.textContent=I,A.style.cssText=`
                position: fixed;
                background: #333;
                color: white;
                padding: 8px 12px;
                border-radius: 4px;
                font-size: 12px;
                z-index: 99999;
                max-width: 350px;
                word-wrap: break-word;
                white-space: pre-line;
                box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                pointer-events: none;
                opacity: 0;
                transition: opacity 0.2s ease;
            `,document.body.appendChild(A),x=A,setTimeout(()=>{x===A&&(A.style.opacity="1")},10);const O=j.getBoundingClientRect();let B=O.top-8,$=O.left+O.width/2;setTimeout(()=>{const W=A.getBoundingClientRect();$=O.left+O.width/2-W.width/2,$<8&&($=8),$+W.width>window.innerWidth-8&&($=window.innerWidth-W.width-8),B=O.top-W.height-8,B<8&&(B=O.bottom+8),A.style.top=B+"px",A.style.left=$+"px"},10)},g=()=>{x&&(x.style.opacity="0",setTimeout(()=>{x&&document.body.contains(x)&&document.body.removeChild(x),x=null},200))},w=b=>{p(b)},P=()=>{g()},f=document.querySelectorAll("[data-tooltip]");f.forEach(b=>{b.addEventListener("mouseenter",w),b.addEventListener("mouseleave",P),b.addEventListener("blur",P)}),document.addEventListener("mouseleave",g);const N=()=>{document.querySelectorAll("[data-tooltip]").forEach(j=>{j.hasAttribute("data-tooltip-initialized")||(j.addEventListener("mouseenter",w),j.addEventListener("mouseleave",P),j.addEventListener("blur",P),j.setAttribute("data-tooltip-initialized","true"))})};return document.addEventListener("tooltipReinitialize",N),()=>{f.forEach(b=>{b.removeEventListener("mouseenter",w),b.removeEventListener("mouseleave",P),b.removeEventListener("blur",P)}),document.removeEventListener("mouseleave",g),document.removeEventListener("tooltipReinitialize",N),x&&document.body.contains(x)&&(document.body.removeChild(x),x=null)}},[]);const d=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"ZMW",minimumFractionDigits:0,maximumFractionDigits:0}).format(x),h=x=>`${x.toFixed(2)}%`,u=x=>{switch(x){case"Low":return"bg-success";case"Medium":return"bg-warning";case"High":return"bg-danger";default:return"bg-secondary"}},v=async()=>{var x;i(!0);try{const p=(x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.content;if((await fetch(`/customers/${t.id}/update-metrics`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p||""}})).ok){const P=await(await fetch(`/customers/${t.id}/profitability`)).json();m(P.data)}}catch(p){console.error("Error updating metrics:",p)}finally{i(!1)}};return e.jsxs(ba,{title:`Customer 360: ${t.name}`,children:[e.jsx("div",{className:"page-header d-print-none",children:e.jsx("div",{className:"container-xl",children:e.jsxs("div",{className:"row g-2 align-items-center",children:[e.jsxs("div",{className:"col",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(Pe,{href:"/customers",children:"Customers"})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:t.name})]})}),e.jsx("div",{className:"page-pretitle",children:"Customer 360 View"}),e.jsx("h2",{className:"page-title",children:t.name}),e.jsxs("div",{className:"text-muted",children:[t.customer_id," • ",t.branch_code||"No Branch"]})]}),e.jsx("div",{className:"col-auto ms-auto d-print-none",children:e.jsxs("div",{className:"btn-list",children:[e.jsxs(Pe,{href:"/customers",className:"btn",children:[e.jsx(it,{size:16,className:"me-1"}),"Back to Customers"]}),e.jsxs("button",{className:"btn btn-primary",onClick:v,disabled:n,children:[e.jsx(nt,{size:16,className:`me-1 ${n?"spin":""}`}),n?"Updating...":"Update Metrics"]})]})})]})})}),e.jsx("div",{className:"page-body",children:e.jsxs("div",{className:"container-xl",children:[e.jsx("div",{className:"row row-deck row-cards mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Customer Information"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label text-dark",children:"Customer ID"}),e.jsx("div",{className:"fw-bold text-dark",children:t.customer_id})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label text-dark d-flex align-items-center",children:["Branch",e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"Branch code where this customer is primarily served"})]}),e.jsx("div",{className:"fw-bold text-dark",children:t.branch_code||"Not specified"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label text-dark",children:"Email"}),e.jsx("div",{className:"fw-bold text-dark",children:t.email||"Not provided"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label text-dark",children:"Phone"}),e.jsx("div",{className:"fw-bold text-dark",children:t.phone||"Not provided"})]})})]})]}),e.jsx("div",{className:"col-md-6",children:t.demographics&&e.jsxs("div",{children:[e.jsxs("h5",{className:"mb-3 d-flex align-items-center",children:["Demographics",e.jsx(y,{size:14,className:"ms-2 text-muted","data-tooltip":"Customer demographic information collected during onboarding or profile updates"})]}),e.jsxs("div",{className:"row",children:[t.demographics.age&&e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label text-dark",children:"Age"}),e.jsx("div",{className:"fw-bold text-dark",children:t.demographics.age})]})}),t.demographics.gender&&e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label text-dark",children:"Gender"}),e.jsx("div",{className:"fw-bold text-dark",children:t.demographics.gender})]})}),t.demographics.occupation&&e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label text-dark",children:"Occupation"}),e.jsx("div",{className:"fw-bold text-dark",children:t.demographics.occupation})]})}),t.demographics.city&&e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label text-dark",children:"City"}),e.jsx("div",{className:"fw-bold text-dark",children:t.demographics.city})]})}),t.demographics.address&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label text-dark",children:"Address"}),e.jsx("div",{className:"fw-bold text-dark",children:t.demographics.address})]})}),t.demographics.country&&e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label text-dark",children:"Country"}),e.jsx("div",{className:"fw-bold text-dark",children:t.demographics.country})]})})]})]})})]})})]})})}),e.jsxs("div",{className:"row row-deck row-cards mb-4",children:[e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"subheader d-flex align-items-center",children:["Profitability",e.jsx(y,{size:14,className:"ms-1 text-muted","data-tooltip":`Net profit calculated as: Interest Earned from Loans - Interest Paid on Deposits - Operating Costs

Interest Earned: Loan amount × Interest rate (annual)
Interest Paid: Deposit balance × Interest rate (annual)
Operational Costs: Base cost per product + loan/deposit management + NPL risk costs

${c("loans")}

${c("deposits")}`})]}),e.jsx("div",{className:"ms-auto",children:e.jsx("div",{className:"bg-green text-white avatar",children:e.jsx(ia,{size:24})})})]}),e.jsxs("div",{className:"d-flex align-items-baseline",children:[e.jsx("div",{className:"h1 mb-0 me-2",children:d(l.profitability)}),l.profitability>=0?e.jsx(J,{size:16,className:"text-success"}):e.jsx(lt,{size:16,className:"text-danger"})]}),e.jsxs("div",{className:"text-muted",children:["Margin: ",h(l.profitability_margin)]})]})})}),e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"subheader d-flex align-items-center",children:["Loans Outstanding",e.jsx(y,{size:14,className:"ms-1 text-muted","data-tooltip":`Total amount of active loans currently owed by this customer across all loan products

${c("loans")}`})]}),e.jsx("div",{className:"ms-auto",children:e.jsx("div",{className:"bg-blue text-white avatar",children:e.jsx(na,{size:24})})})]}),e.jsx("div",{className:"h1 mb-3",children:d(l.total_loans_outstanding)}),e.jsxs("div",{className:"text-muted",children:["NPL: ",d(l.npl_exposure),e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":`Non-Performing Loans: Loans that are 90+ days past due or in default

${c("npl")}`})]})]})})}),e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"subheader d-flex align-items-center",children:["Total Deposits",e.jsx(y,{size:14,className:"ms-1 text-muted","data-tooltip":`Total amount of deposits held by this customer across all deposit products (savings, current accounts, etc.)

${c("deposits")}`})]}),e.jsx("div",{className:"ms-auto",children:e.jsx("div",{className:"bg-purple text-white avatar",children:e.jsx(me,{size:24})})})]}),e.jsx("div",{className:"h1 mb-3",children:d(l.total_deposits)}),e.jsxs("div",{className:"text-muted",children:["Interest Paid: ",d(l.interest_paid),e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"Total interest paid to customer on their deposit balances"})]})]})})}),e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"subheader d-flex align-items-center",children:["Risk Level",e.jsx(y,{size:14,className:"ms-1 text-muted","data-tooltip":"Risk assessment based on NPL ratio: Low (<2%), Medium (2-5%), High (>5%)"})]}),e.jsx("div",{className:"ms-auto",children:e.jsx("div",{className:"bg-orange text-white avatar",children:e.jsx(E,{size:24})})})]}),e.jsx("div",{className:"h1 mb-3",children:e.jsx("span",{className:`badge ${u(l.risk_level)} text-dark`,children:l.risk_level})}),e.jsxs("div",{className:"text-muted",children:["NPL Ratio: ",h(l.npl_ratio),e.jsx(y,{size:12,className:"ms-1 text-muted","data-tooltip":"Non-Performing Loans as percentage of total loans outstanding"})]})]})})})]}),e.jsx("div",{className:"row row-deck row-cards",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("ul",{className:"nav nav-tabs card-header-tabs","data-bs-toggle":"tabs",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("a",{href:"#profitability",className:"nav-link active","data-bs-toggle":"tab",children:[e.jsx(ya,{size:16,className:"me-1"}),"Profitability"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("a",{href:"#portfolio",className:"nav-link","data-bs-toggle":"tab",children:[e.jsx(ct,{size:16,className:"me-1"}),"Portfolio"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("a",{href:"#risk",className:"nav-link","data-bs-toggle":"tab",children:[e.jsx(E,{size:16,className:"me-1"}),"Risk Analysis"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("a",{href:"#insights",className:"nav-link","data-bs-toggle":"tab",children:[e.jsx(J,{size:16,className:"me-1"}),"Insights"]})})]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"tab-pane active show",id:"profitability",children:e.jsx(Hs,{customer:t,profitability:l})}),e.jsx("div",{className:"tab-pane",id:"portfolio",children:e.jsx(Gs,{customer:t,productsByCategory:r})}),e.jsx("div",{className:"tab-pane",id:"risk",children:e.jsx(Zs,{customer:t,nplExposure:s,profitability:l})}),e.jsx("div",{className:"tab-pane",id:"insights",children:e.jsx(qs,{customer:t,profitability:l,nplExposure:s})})]})})]})})})]})})]})}export{nr as default};
