class f{constructor(){var r;this.baseURL="/api",this.defaultHeaders={"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.content)||""}}async request(r,e={}){const{method:t="GET",body:a=null,headers:n={},...l}=e,d=r.startsWith("/")?`${this.baseURL}${r}`:`${this.baseURL}/${r}`,h={method:t,headers:{...this.defaultHeaders,...n},...l};a&&t!=="GET"&&(h.body=JSON.stringify(a));try{const s=await fetch(d,h),o=await s.json(),i={success:s.ok,status:s.status,data:o.data||o,message:o.message||(s.ok?"Success":"Request failed"),errors:o.errors||null,meta:o.meta||null};if(!s.ok)throw new c(i.message,s.status,i.errors,i.data);return i}catch(s){throw s instanceof c?s:new c("Network error or server unavailable",0,null,null,s)}}async get(r,e={}){return this.request(r,{...e,method:"GET"})}async post(r,e,t={}){return this.request(r,{...t,method:"POST",body:e})}async put(r,e,t={}){return this.request(r,{...t,method:"PUT",body:e})}async patch(r,e,t={}){return this.request(r,{...t,method:"PATCH",body:e})}async delete(r,e={}){return this.request(r,{...e,method:"DELETE"})}}class c extends Error{constructor(r,e,t=null,a=null,n=null){super(r),this.name="ApiError",this.status=e,this.errors=t,this.data=a,this.originalError=n,this.isNetworkError=e===0,this.isValidationError=e===422,this.isServerError=e>=500,this.isClientError=e>=400&&e<500}getUserMessage(){return this.isNetworkError?"Unable to connect to server. Please check your internet connection.":this.isValidationError&&this.errors?typeof this.errors=="object"?Object.values(this.errors).flat().join(", "):this.errors:this.isServerError?"Server error occurred. Please try again later.":this.message||"An unexpected error occurred."}getDebugInfo(){return{message:this.message,status:this.status,errors:this.errors,data:this.data,originalError:this.originalError}}}const E=new f;export{c as ApiError,E as default};
