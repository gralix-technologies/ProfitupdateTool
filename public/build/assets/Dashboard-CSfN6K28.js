import{r as g,j as e,L as m}from"./app-BkeQkwCz.js";import{h as N,k as f,e as j,n as b,f as p,A as w,l as y}from"./AppLayout-QgBVyLMh.js";import{u as k}from"./useCurrency-IKboy93q.js";import{I as C}from"./IconMath-BtpA-xAv.js";import{I}from"./IconUpload-DI1O2urB.js";import{I as _}from"./IconEye-BLMw8FPn.js";import{I as S}from"./IconTrendingUp-CoTcLOBw.js";import{I as A}from"./IconCurrencyDollar-DCDJ1xJI.js";/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]],v=N("outline","arrow-right","ArrowRight",$);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}]],D=N("outline","box","Box",P);function L({onStartWorkflow:d}){const[l,n]=g.useState(0),i=[{id:"customers",title:"Create Customer Listings",description:"Set up your customer base with demographic and financial information",icon:j,route:"/customers/create",color:"primary",details:["Add customer basic information (name, email, phone)","Set demographic data (age, gender, occupation, location)","Configure financial metrics (loans, deposits, risk levels)","Enable bulk upload for multiple customers"]},{id:"products",title:"Create Product Listings",description:"Define your financial products and their data fields",icon:D,route:"/products/create",color:"success",details:["Define product categories (Loans, Deposits, Insurance, etc.)","Create custom data fields for each product","Set up field types and validation rules","Configure portfolio value calculations"]},{id:"formulas",title:"Create Product-Specific Formulas",description:"Build calculation formulas based on your product data fields",icon:C,route:"/formulas/create",color:"warning",details:["Link formulas to specific products","Use available data fields in calculations","Set return types (number, currency, percentage)","Create templates for common calculations"]},{id:"dashboard",title:"Create Dashboard",description:"Build your analytics dashboard with widgets",icon:b,route:"/dashboards/create",color:"info",details:["Choose from available widget types (KPI, Charts, Tables)","Configure widgets using your formulas","Set up data sources and formatting","Arrange widgets in a responsive layout"]},{id:"ingest",title:"Ingest Data",description:"Upload your actual product data to populate the dashboard",icon:I,route:"/data-import",color:"secondary",details:["Upload CSV files with product data","Map data fields to product definitions","Validate data integrity and completeness","Process and store data for analytics"]},{id:"view",title:"View Dashboard",description:"Analyze your data through interactive dashboards",icon:_,route:"/dashboards",color:"danger",details:["View real-time analytics and KPIs","Filter data by various criteria","Export reports in multiple formats","Monitor trends and performance metrics"]}],r=(s,a)=>{const h=s.icon,o=a<l,x=a===l;return e.jsx("div",{className:`step-icon ${o?"completed":x?"current":"pending"}`,children:o?e.jsx(p,{size:20}):e.jsx(h,{size:20})})},t=s=>{n(s)},u=()=>{d&&d(),window.location.href=i[0].route};return e.jsxs("div",{className:"guided-workflow",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h3",{className:"card-title",children:[e.jsx(f,{size:24,className:"me-2"}),"Portfolio Analytics Setup Guide"]}),e.jsx("p",{className:"text-muted mb-0",children:"Follow these steps to set up your complete analytics platform"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-8",children:e.jsx("div",{className:"workflow-steps",children:i.map((s,a)=>e.jsx("div",{className:`workflow-step ${a===l?"active":""}`,onClick:()=>t(a),style:{cursor:"pointer"},children:e.jsx("div",{className:"step-content",children:e.jsxs("div",{className:"d-flex align-items-start",children:[r(s,a),e.jsxs("div",{className:"step-details ms-3",children:[e.jsxs("h5",{className:"step-title",children:[s.title,e.jsxs("span",{className:`badge bg-${s.color} ms-2`,children:["Step ",a+1]})]}),e.jsx("p",{className:"step-description",children:s.description})]})]})})},s.id))})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"workflow-details",children:[e.jsx("h6",{className:"mb-3",children:"Current Step Details"}),e.jsxs("div",{className:"current-step-info",children:[e.jsx("h5",{className:"text-primary mb-2",children:i[l].title}),e.jsx("p",{className:"text-muted mb-3",children:i[l].description}),e.jsx("ul",{className:"list-unstyled",children:i[l].details.map((s,a)=>e.jsxs("li",{className:"mb-2",children:[e.jsx(p,{size:16,className:"text-success me-2"}),s]},a))}),e.jsx("div",{className:"mt-4",children:e.jsxs(m,{href:i[l].route,className:"btn btn-primary w-100",children:["Start ",i[l].title,e.jsx(v,{size:16,className:"ms-2"})]})})]})]})})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("button",{className:"btn btn-success btn-lg",onClick:u,children:["Start Complete Workflow",e.jsx(v,{size:20,className:"ms-2"})]}),e.jsx("p",{className:"text-muted mt-2 mb-0",children:"This will guide you through all steps in sequence"})]})]})]}),e.jsx("style",{jsx:!0,children:`
                .workflow-step {
                    padding: 1rem;
                    border-left: 3px solid #e9ecef;
                    margin-bottom: 1rem;
                    transition: all 0.3s ease;
                    border-radius: 0.375rem;
                }
                
                .workflow-step:hover {
                    background-color: #f8f9fa;
                    border-left-color: #0d6efd;
                }
                
                .workflow-step.active {
                    background-color: #e7f3ff;
                    border-left-color: #0d6efd;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                }
                
                .step-icon {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    flex-shrink: 0;
                }
                
                .step-icon.pending {
                    background-color: #e9ecef;
                    color: #6c757d;
                }
                
                .step-icon.current {
                    background-color: #0d6efd;
                    color: white;
                }
                
                .step-icon.completed {
                    background-color: #198754;
                    color: white;
                }
                
                .step-title {
                    margin-bottom: 0.5rem;
                    font-weight: 600;
                }
                
                .step-description {
                    color: #6c757d;
                    margin-bottom: 0;
                }
                
                .workflow-details {
                    background-color: #f8f9fa;
                    padding: 1.5rem;
                    border-radius: 0.375rem;
                    border: 1px solid #e9ecef;
                }
            `})]})}function W({stats:d=[],recentCustomers:l=[],riskAlerts:n=[],portfolioPerformance:i=[],productBreakdown:r=[]}){const{formatAmountWithCode:t}=k(),u={users:j,"currency-dollar":A,"trending-up":S,"alert-triangle":y};return e.jsxs(w,{title:"Dashboard",children:[e.jsx("div",{className:"page-header d-print-none",children:e.jsx("div",{className:"container-xl",children:e.jsx("div",{className:"row g-2 align-items-center",children:e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"page-pretitle",children:"Overview"}),e.jsx("h2",{className:"page-title",children:"Dashboard"})]})})})}),e.jsx("div",{className:"page-body",children:e.jsxs("div",{className:"container-xl",children:[(!d||d.length===0||d.every(s=>s.value==="0"||s.value===0))&&e.jsx("div",{className:"mb-4",children:e.jsx(L,{})}),e.jsx("div",{className:"row row-deck row-cards",children:d.map((s,a)=>{var o,x;const h=u[s.icon]||j;if(s.title==="Portfolio Value"&&((o=s.metadata)!=null&&o.breakdown)){const c=s.metadata.breakdown;return e.jsx("div",{className:"col-sm-12 col-lg-6",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"subheader",children:s.title}),e.jsx("div",{className:"ms-auto",children:e.jsx("div",{className:`bg-${s.color} text-white avatar`,children:e.jsx(h,{size:24})})})]}),e.jsx("div",{className:"h1 mb-3",children:s.value}),e.jsxs("div",{className:"d-flex mb-2",children:[e.jsx("div",{className:"text-muted",children:s.description}),e.jsx("div",{className:"ms-auto",children:e.jsxs("span",{className:`text-${s.changeType==="positive"?"green":"red"} d-inline-flex align-items-center lh-1`,children:[s.change,s.changeType==="positive"?" ↗":" ↘"]})})]}),e.jsxs("div",{className:"row g-2 mt-3",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"text-muted small",children:"Active Portfolio"}),e.jsx("div",{className:"text-success fw-bold",children:t(c.active)})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"text-muted small",children:"NPL Amount"}),e.jsx("div",{className:"text-danger fw-bold",children:t(c.npl)})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"d-flex justify-content-between small text-muted",children:c.category==="Loan"?e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["NPL Ratio: ",(x=c.npl_percentage)==null?void 0:x.toFixed(2),"%"]}),e.jsxs("span",{children:[(c.npl/c.total*100).toFixed(1),"% of total"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["Active Accounts: ",c.active_accounts||c.total_accounts]}),e.jsxs("span",{children:[((c.active_accounts||c.total_accounts)/c.total*100).toFixed(1),"% of total"]})]})})})]})})},a)}return e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"subheader",children:s.title}),e.jsx("div",{className:"ms-auto",children:e.jsx("div",{className:`bg-${s.color} text-white avatar`,children:e.jsx(h,{size:24})})})]}),e.jsx("div",{className:"h1 mb-3",children:s.value}),e.jsxs("div",{className:"d-flex mb-2",children:[e.jsx("div",{className:"text-muted",children:s.description}),e.jsx("div",{className:"ms-auto",children:e.jsxs("span",{className:`text-${s.changeType==="positive"?"green":"red"} d-inline-flex align-items-center lh-1`,children:[s.change,s.changeType==="positive"?" ↗":" ↘"]})})]})]})})},a)})}),i&&i.length>0||r&&r.length>0?e.jsxs("div",{className:"row row-deck row-cards",children:[i.length>0&&e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Portfolio Performance by Product"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-vcenter",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Value"}),e.jsx("th",{children:"Accounts"}),e.jsx("th",{children:"NPL Rate"})]})}),e.jsx("tbody",{children:i.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("div",{className:"flex-fill",children:e.jsx("div",{className:"font-weight-medium",children:s.product_name})})})}),e.jsx("td",{children:e.jsx("div",{className:"text-muted",children:t(s.total_value)})}),e.jsx("td",{children:e.jsx("div",{className:"text-muted",children:s.active_accounts})}),e.jsx("td",{children:s.category==="Loan"&&s.npl_rate!==void 0?e.jsxs("span",{className:`badge ${s.npl_rate>5?"bg-red":s.npl_rate>2?"bg-yellow":"bg-green"}`,children:[s.npl_rate.toFixed(1),"%"]}):e.jsx("span",{className:"text-muted",children:"N/A"})})]},a))})]})})})]})}),r.length>0&&e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Product Breakdown"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-vcenter",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Total Value"}),e.jsx("th",{children:"Avg Value"})]})}),e.jsx("tbody",{children:r.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("div",{className:"flex-fill",children:e.jsx("div",{className:"font-weight-medium",children:s.name})})})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-blue-lt",children:s.category})}),e.jsx("td",{children:e.jsx("div",{className:"text-muted",children:t(s.total_value)})}),e.jsx("td",{children:e.jsx("div",{className:"text-muted",children:t(s.average_value)})})]},a))})]})})})]})})]}):null,(l.length>0||n.length>0)&&e.jsxs("div",{className:"row row-deck row-cards",children:[l.length>0&&e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Recent Customers"})}),e.jsx("div",{className:"card-body p-0",children:e.jsx("div",{className:"list-group list-group-flush",children:l.map((s,a)=>e.jsx("div",{className:"list-group-item",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("span",{className:"avatar bg-primary text-white",children:s.initials})}),e.jsxs("div",{className:"col text-truncate",children:[e.jsx(m,{href:`/customers/${s.id}`,className:"text-body d-block",children:s.name}),e.jsxs("div",{className:"d-block text-muted text-truncate mt-n1",children:[s.segment," Customer • ",t(s.portfolio_value)," portfolio"]})]}),e.jsx("div",{className:"col-auto",children:e.jsx(m,{href:`/customers/${s.id}`,className:"btn btn-primary btn-sm",children:"View"})})]})},a))})})]})}),n.length>0&&e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title text-dark fw-bold",children:"Risk Alerts"})}),e.jsx("div",{className:"card-body p-0",children:e.jsx("div",{className:"list-group list-group-flush",children:n.map((s,a)=>e.jsx("div",{className:"list-group-item",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("span",{className:`status-dot status-dot-animated ${s.severity==="high"?"bg-red":"bg-yellow"} d-block`})}),e.jsxs("div",{className:"col text-truncate",children:[e.jsx(m,{href:s.customer_id?`/customers/${s.customer_id}`:"/dashboards",className:"text-body d-block",children:s.type}),e.jsxs("div",{className:"d-block text-muted text-truncate mt-n1",children:[s.description,s.percentage&&` (${s.percentage}%)`]})]}),e.jsx("div",{className:"col-auto",children:e.jsx(m,{href:s.customer_id?`/customers/${s.customer_id}`:"/dashboards",className:"btn btn-primary btn-sm",children:"Review"})})]})},a))})})]})})]})]})})]})}export{W as default};
