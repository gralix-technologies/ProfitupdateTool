import{r as v,j as s,L as c,a as u}from"./app-BkeQkwCz.js";import{A as b,d,e as p,c as g,f}from"./AppLayout-QgBVyLMh.js";import{I as x}from"./IconPlus-Cs3MX6an.js";import{I as h}from"./IconKey-BGKMV__n.js";import{I as y}from"./IconTrash-DY-55J-g.js";function P({roles:a,permissions:n,auth:w}){const[i,o]=v.useState(null),m=e=>{switch(e){case"Admin":return"danger";case"Analyst":return"warning";case"Viewer":return"success";default:return"secondary"}},j=(e,l)=>{confirm(`Are you sure you want to delete the "${l}" role?`)&&u.delete(`/admin/roles/${e}`)},N=e=>{o(i===e?null:e)};return s.jsxs(b,{title:"Role Management",children:[s.jsx("div",{className:"page-header d-print-none",children:s.jsx("div",{className:"container-xl",children:s.jsxs("div",{className:"row g-2 align-items-center",children:[s.jsxs("div",{className:"col",children:[s.jsx("div",{className:"page-pretitle",children:"Admin"}),s.jsx("h2",{className:"page-title",children:"Role Management"})]}),s.jsx("div",{className:"col-auto ms-auto d-print-none",children:s.jsx("div",{className:"btn-list",children:s.jsxs(c,{href:"/admin/roles/create",className:"btn btn-primary",children:[s.jsx(x,{size:16,className:"me-1"}),"Add Role"]})})})]})})}),s.jsx("div",{className:"page-body",children:s.jsxs("div",{className:"container-xl",children:[s.jsxs("div",{className:"row row-deck row-cards mb-3",children:[s.jsx("div",{className:"col-sm-6 col-lg-3",children:s.jsx("div",{className:"card",children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("div",{className:"subheader",children:"Total Roles"}),s.jsx("div",{className:"ms-auto",children:s.jsx(d,{size:24,className:"text-primary"})})]}),s.jsx("div",{className:"h1 mb-3",children:a.length}),s.jsx("div",{className:"d-flex mb-2",children:s.jsx("div",{className:"text-muted",children:"Available roles"})})]})})}),s.jsx("div",{className:"col-sm-6 col-lg-3",children:s.jsx("div",{className:"card",children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("div",{className:"subheader",children:"Total Permissions"}),s.jsx("div",{className:"ms-auto",children:s.jsx(h,{size:24,className:"text-success"})})]}),s.jsx("div",{className:"h1 mb-3",children:n.length}),s.jsx("div",{className:"d-flex mb-2",children:s.jsx("div",{className:"text-muted",children:"System permissions"})})]})})}),s.jsx("div",{className:"col-sm-6 col-lg-3",children:s.jsx("div",{className:"card",children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("div",{className:"subheader",children:"Admin Roles"}),s.jsx("div",{className:"ms-auto",children:s.jsx(d,{size:24,className:"text-danger"})})]}),s.jsx("div",{className:"h1 mb-3",children:a.filter(e=>e.name==="Admin").length}),s.jsx("div",{className:"d-flex mb-2",children:s.jsx("div",{className:"text-muted",children:"Administrative roles"})})]})})}),s.jsx("div",{className:"col-sm-6 col-lg-3",children:s.jsx("div",{className:"card",children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("div",{className:"subheader",children:"Standard Roles"}),s.jsx("div",{className:"ms-auto",children:s.jsx(p,{size:24,className:"text-info"})})]}),s.jsx("div",{className:"h1 mb-3",children:a.filter(e=>!["Admin"].includes(e.name)).length}),s.jsx("div",{className:"d-flex mb-2",children:s.jsx("div",{className:"text-muted",children:"Standard user roles"})})]})})})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h3",{className:"card-title",children:"Roles & Permissions"})}),s.jsx("div",{className:"card-body",children:a.length>0?s.jsx("div",{className:"row",children:a.map(e=>{var l,r;return s.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:s.jsx("div",{className:"card",children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"d-flex align-items-center mb-3",children:[s.jsx("div",{className:"me-3",children:s.jsx(d,{size:24,className:`text-${m(e.name)}`})}),s.jsxs("div",{className:"flex-fill",children:[s.jsx("h4",{className:"card-title mb-1",children:e.name}),s.jsxs("span",{className:`badge bg-${m(e.name)}`,children:[((l=e.permissions)==null?void 0:l.length)||0," permissions"]})]}),s.jsxs("div",{className:"dropdown",children:[s.jsx("button",{className:"btn btn-white btn-sm dropdown-toggle","data-bs-toggle":"dropdown",children:"Actions"}),s.jsxs("div",{className:"dropdown-menu",children:[s.jsxs(c,{href:`/admin/roles/${e.id}/edit`,className:"dropdown-item",children:[s.jsx(g,{size:16,className:"me-2"}),"Edit"]}),s.jsxs("button",{className:"dropdown-item text-danger",onClick:()=>j(e.id,e.name),disabled:e.name==="Admin",children:[s.jsx(y,{size:16,className:"me-2"}),"Delete"]})]})]})]}),s.jsx("div",{className:"mb-3",children:s.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>N(e.id),children:[i===e.id?"Hide":"Show"," Permissions"]})}),i===e.id&&s.jsxs("div",{className:"permissions-list",children:[s.jsx("h6",{className:"mb-2",children:"Permissions:"}),s.jsx("div",{className:"row",children:((r=e.permissions)==null?void 0:r.map(t=>s.jsx("div",{className:"col-12 mb-1",children:s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx(f,{size:16,className:"me-2 text-success"}),s.jsx("span",{className:"small",children:t.name})]})},t.id)))||s.jsx("div",{className:"col-12",children:s.jsx("div",{className:"text-muted small",children:"No permissions assigned"})})})]})]})})},e.id)})}):s.jsxs("div",{className:"empty",children:[s.jsx("div",{className:"empty-img",children:s.jsx(d,{size:48,className:"text-muted"})}),s.jsx("p",{className:"empty-title",children:"No roles found"}),s.jsx("p",{className:"empty-subtitle text-muted",children:"Create your first role to get started with permission management"}),s.jsx("div",{className:"empty-action",children:s.jsxs(c,{href:"/admin/roles/create",className:"btn btn-primary",children:[s.jsx(x,{size:16,className:"me-1"}),"Add Role"]})})]})})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h3",{className:"card-title",children:"All Available Permissions"})}),s.jsx("div",{className:"card-body",children:s.jsx("div",{className:"row",children:n.map(e=>s.jsx("div",{className:"col-md-6 col-lg-4 mb-2",children:s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx(h,{size:16,className:"me-2 text-muted"}),s.jsx("span",{className:"small",children:e.name})]})},e.id))})})]})]})})]})}export{P as default};
