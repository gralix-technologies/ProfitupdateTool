import{r as b,j as s,L as i,v as x,b as j,a as n}from"./app-BkeQkwCz.js";import{A as g}from"./AppLayout-QgBVyLMh.js";import{u as N,F as v}from"./FormulaForm-pPuOhN5S.js";import{I as F}from"./IconArrowLeft-0rt3x0IP.js";import"./IconRefresh-U6chIQJB.js";import"./IconAlertCircle-WImK9GUn.js";import"./IconMath-BtpA-xAv.js";import"./card-DYiue1Z-.js";import"./IconCircleCheck-72xOlUga.js";import"./apiClient-B5VLjQ69.js";import"./IconPlayerPlay-QXgf9gYp.js";import"./IconCopy-EHB0SucX.js";import"./IconDownload-DpSVhOrW.js";import"./IconChevronUp-CSfYcfYK.js";function B({products:t,returnTypes:c,supportedOperations:m,fieldSuggestions:d,functionDocumentation:u}){const[h,r]=b.useState(!1),{handleError:o}=N(),f=async a=>{if(r(!0),console.log("Submitting formula data:",a),!x()){console.error("CSRF token not available for formula submission"),o("CSRF token not available. Please refresh the page."),r(!1);return}const l=j();l&&(a._token=l);try{await n.post("/formulas",a,{onStart:()=>{console.log("Formula form submission started...")},onProgress:()=>{console.log("Formula form submission in progress...")},onSuccess:e=>{console.log("Formula form submission successful:",e)},onError:e=>{console.error("Formula form submission error:",e),o(e,{fallbackMessage:"Failed to create formula. Please check your inputs and try again."})},onFinish:()=>{console.log("Formula form submission finished"),r(!1)}})}catch(e){console.error("Formula submit error:",e),r(!1)}},p=()=>{n.get("/formulas")};return s.jsxs(g,{title:"Create Formula",children:[s.jsx("div",{className:"page-header d-print-none",children:s.jsx("div",{className:"container-xl",children:s.jsxs("div",{className:"row g-2 align-items-center",children:[s.jsxs("div",{className:"col",children:[s.jsx("nav",{"aria-label":"breadcrumb",children:s.jsxs("ol",{className:"breadcrumb",children:[s.jsx("li",{className:"breadcrumb-item",children:s.jsx(i,{href:"/formulas",children:"Formulas"})}),s.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Create"})]})}),s.jsx("div",{className:"page-pretitle",children:"Analytics"}),s.jsx("h2",{className:"page-title",children:"Create Formula"})]}),s.jsx("div",{className:"col-auto ms-auto d-print-none",children:s.jsx("div",{className:"btn-list",children:s.jsxs(i,{href:"/formulas",className:"btn",children:[s.jsx(F,{size:16,className:"me-1"}),"Back to Formulas"]})})})]})})}),s.jsx("div",{className:"page-body",children:s.jsx("div",{className:"container-fluid px-3",children:s.jsx("div",{className:"row g-3",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h3",{className:"card-title",children:"Formula Details"})}),s.jsx("div",{className:"card-body",children:s.jsx(v,{onSubmit:f,onCancel:p,products:t,returnTypes:c,supportedOperations:m,fieldSuggestions:d,functionDocumentation:u,isSubmitting:h,submitLabel:"Create Formula"})})]})})})})})]})}export{B as default};
