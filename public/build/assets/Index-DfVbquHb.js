import{r as p,j as e,L as l,a as i}from"./app-BkeQkwCz.js";import{A as I,b as u,c as w}from"./AppLayout-QgBVyLMh.js";import{I as c}from"./IconPlus-Cs3MX6an.js";import{I as S}from"./IconFilter-DpaF_UhO.js";import{I as g}from"./IconSearch-qzSKrpRq.js";import{I as z}from"./IconEye-BLMw8FPn.js";import{I as P}from"./IconCopy-EHB0SucX.js";import{I as $}from"./IconTrash-DY-55J-g.js";function O({products:t,categories:v,filters:n}){var j;const[r,d]=p.useState(n.search||""),[o,m]=p.useState(n.category||""),h=()=>{i.get("/products",{search:r,category:o},{preserveState:!0})},y=()=>{d(""),m(""),i.get("/products")},f=s=>{confirm(`Are you sure you want to delete "${s.name}"?`)&&i.delete(`/products/${s.id}`,{onSuccess:()=>{},onError:a=>{alert("Failed to delete product: "+Object.values(a).join(", "))}})},C=s=>{confirm(`Create a copy of "${s.name}"?`)&&i.post(`/products/${s.id}/copy`,{},{onSuccess:a=>{var b;const N=((b=a.props.flash)==null?void 0:b.success)||{};N.redirect&&i.visit(N.redirect)},onError:a=>{alert("Failed to copy product: "+Object.values(a).join(", "))}})},x=s=>{const a={Loan:"bg-blue",Account:"bg-green",Deposit:"bg-yellow",Transaction:"bg-purple",Other:"bg-gray"};return a[s]||a.Other};return e.jsxs(I,{title:"Products",children:[e.jsx("div",{className:"page-header d-print-none",children:e.jsx("div",{className:"container-xl",children:e.jsxs("div",{className:"row g-2 align-items-center",children:[e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"page-pretitle",children:"Financial Products"}),e.jsx("h2",{className:"page-title",children:"Products"})]}),e.jsx("div",{className:"col-auto ms-auto d-print-none",children:e.jsxs("div",{className:"btn-list",children:[e.jsxs(l,{href:"/products/create",className:"btn btn-primary d-none d-sm-inline-block",children:[e.jsx(c,{size:16,className:"me-1"}),"Create Product"]}),e.jsx(l,{href:"/products/create",className:"btn btn-primary d-sm-none btn-icon",children:e.jsx(c,{size:16})})]})})]})})}),e.jsx("div",{className:"page-body",children:e.jsx("div",{className:"container-xl",children:e.jsxs("div",{className:"row row-deck row-cards",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:[e.jsx(S,{size:18,className:"me-2"}),"Filter Products"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3 align-items-end",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"Search Products"}),e.jsxs("div",{className:"input-icon",children:[e.jsx("span",{className:"input-icon-addon",children:e.jsx(g,{size:16})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name or description...",value:r,onChange:s=>d(s.target.value),onKeyPress:s=>s.key==="Enter"&&h()})]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"Category"}),e.jsxs("select",{className:"form-select",value:o,onChange:s=>m(s.target.value),children:[e.jsx("option",{value:"",children:"All Categories"}),v.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"btn-list",children:[e.jsxs("button",{className:"btn btn-primary",onClick:h,children:[e.jsx(g,{size:16,className:"me-1"}),"Search"]}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:y,children:"Clear Filters"})]})})]})})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:[e.jsx(u,{size:18,className:"me-2"}),"Products (",t.total||((j=t.data)==null?void 0:j.length)||0,")"]})}),t.data&&t.data.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-vcenter card-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Fields"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:t.data.map(s=>{var a;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:`avatar me-3 ${x(s.category)} text-white`,children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-fill",children:[e.jsx("div",{className:"font-weight-medium text-dark",children:s.name}),s.description&&e.jsx("div",{className:"text-muted small",children:s.description})]})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${x(s.category)} text-white`,children:s.category})}),e.jsx("td",{children:e.jsxs("div",{className:"text-muted fw-medium",children:[((a=s.field_definitions)==null?void 0:a.length)||0," fields"]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.is_active?"bg-success":"bg-secondary"} text-white`,children:s.is_active?"Active":"Inactive"})}),e.jsx("td",{children:e.jsx("div",{className:"text-muted",children:new Date(s.created_at).toLocaleDateString()})}),e.jsx("td",{children:e.jsxs("div",{className:"btn-list flex-nowrap",children:[e.jsx(l,{href:`/products/${s.id}`,className:"btn btn-primary btn-sm",title:"View",children:e.jsx(z,{size:16})}),e.jsx(l,{href:`/products/${s.id}/edit`,className:"btn btn-outline-primary btn-sm",title:"Edit",children:e.jsx(w,{size:16})}),e.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>C(s),title:"Copy Product",children:e.jsx(P,{size:16})}),e.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>f(s),title:"Delete",children:e.jsx($,{size:16})})]})})]},s.id)})})]})}):e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"empty",children:[e.jsx("div",{className:"empty-img",children:e.jsx(u,{size:48,className:"text-muted"})}),e.jsx("p",{className:"empty-title",children:"No products found"}),e.jsx("p",{className:"empty-subtitle text-muted",children:"Try adjusting your search criteria or create a new product"}),e.jsx("div",{className:"empty-action",children:e.jsxs(l,{href:"/products/create",className:"btn btn-primary",children:[e.jsx(c,{size:16,className:"me-1"}),"Add Product"]})})]})}),t.links&&t.data&&t.data.length>0&&e.jsxs("div",{className:"card-footer d-flex align-items-center",children:[e.jsxs("p",{className:"m-0 text-muted",children:["Showing ",e.jsx("span",{children:t.from})," to ",e.jsx("span",{children:t.to})," of ",e.jsx("span",{children:t.total})," entries"]}),e.jsx("ul",{className:"pagination m-0 ms-auto",children:t.links.map((s,a)=>e.jsx("li",{className:`page-item ${s.active?"active":""} ${s.url?"":"disabled"}`,children:s.url?e.jsx(l,{href:s.url,className:"page-link",dangerouslySetInnerHTML:{__html:s.label}}):e.jsx("span",{className:"page-link",dangerouslySetInnerHTML:{__html:s.label}})},a))})]})]})})]})})})]})}export{O as default};
