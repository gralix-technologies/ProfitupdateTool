import{j as e,L as r}from"./app-BkeQkwCz.js";import{A as p,a as v}from"./AppLayout-QgBVyLMh.js";import{u as j}from"./useFormWithCsrf-CQ_fNGy5.js";import{I as b}from"./IconArrowLeft-0rt3x0IP.js";import{I as u}from"./IconTrash-DY-55J-g.js";import{I as N}from"./IconDeviceFloppy-BoO_tT2I.js";function $({customer:i,riskLevels:o}){const{data:l,setData:c,put:t,processing:d,errors:s}=j({customer_id:i.customer_id||"",name:i.name||"",email:i.email||"",phone:i.phone||"",branch_code:i.branch_code||"",risk_level:i.risk_level||"",is_active:i.is_active??!0,total_loans_outstanding:i.total_loans_outstanding||0,total_deposits:i.total_deposits||0,npl_exposure:i.npl_exposure||0,profitability:i.profitability||0,demographics:i.demographics||{age:"",gender:"",occupation:"",address:"",city:"",country:"Zambia"}}),{delete:m,processing:n}=useForm(),h=a=>{a.preventDefault(),t(`/customers/${i.id}`)},x=()=>{confirm("Are you sure you want to delete this customer? This action cannot be undone.")&&m(`/customers/${i.id}`)};return e.jsxs(p,{title:`Edit Customer: ${i.name}`,children:[e.jsx("div",{className:"page-header d-print-none",children:e.jsx("div",{className:"container-xl",children:e.jsxs("div",{className:"row g-2 align-items-center",children:[e.jsxs("div",{className:"col",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(r,{href:"/customers",children:"Customers"})}),e.jsx("li",{className:"breadcrumb-item",children:e.jsx(r,{href:`/customers/${i.id}`,children:i.name})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Edit"})]})}),e.jsx("div",{className:"page-pretitle",children:"Customer Management"}),e.jsxs("h2",{className:"page-title",children:["Edit Customer: ",i.name]}),e.jsxs("div",{className:"text-muted",children:["Customer ID: ",i.customer_id]})]}),e.jsx("div",{className:"col-auto ms-auto d-print-none",children:e.jsxs("div",{className:"btn-list",children:[e.jsxs(r,{href:`/customers/${i.id}`,className:"btn",children:[e.jsx(b,{size:16,className:"me-1"}),"Back to Customer"]}),e.jsxs("button",{type:"button",className:"btn btn-danger",onClick:x,disabled:n,children:[e.jsx(u,{size:16,className:"me-1"}),n?"Deleting...":"Delete"]})]})})]})})}),e.jsx("div",{className:"page-body",children:e.jsx("div",{className:"container-fluid px-3",children:e.jsx("div",{className:"row g-3",children:e.jsx("div",{className:"col-12",children:e.jsx("form",{onSubmit:h,children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:[e.jsx(v,{size:18,className:"me-2"}),"Customer Information"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row g-3 mb-4",children:[e.jsx("div",{className:"col-lg-3 col-md-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"Customer ID"}),e.jsx("input",{type:"text",className:"form-control",value:i.customer_id,disabled:!0}),e.jsx("div",{className:"form-hint",children:"Customer ID cannot be changed"})]})}),e.jsx("div",{className:"col-lg-3 col-md-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label required",children:"Full Name"}),e.jsx("input",{type:"text",className:`form-control ${s.name?"is-invalid":""}`,value:l.name,onChange:a=>c("name",a.target.value),placeholder:"Enter customer full name"}),s.name&&e.jsx("div",{className:"invalid-feedback",children:s.name})]})}),e.jsx("div",{className:"col-lg-3 col-md-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsx("input",{type:"email",className:`form-control ${s.email?"is-invalid":""}`,value:l.email,onChange:a=>c("email",a.target.value),placeholder:"Enter email address"}),s.email&&e.jsx("div",{className:"invalid-feedback",children:s.email})]})}),e.jsx("div",{className:"col-lg-3 col-md-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"Phone Number"}),e.jsx("input",{type:"text",className:`form-control ${s.phone?"is-invalid":""}`,value:l.phone,onChange:a=>c("phone",a.target.value),placeholder:"Enter phone number"}),s.phone&&e.jsx("div",{className:"invalid-feedback",children:s.phone})]})})]}),e.jsxs("div",{className:"row g-3 mb-4",children:[e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label required",children:"Branch"}),e.jsx("input",{type:"text",className:`form-control ${s.branch_code?"is-invalid":""}`,value:l.branch_code,onChange:a=>c("branch_code",a.target.value),placeholder:"Enter branch code (e.g., LUS001, NDL001)"}),s.branch_code&&e.jsx("div",{className:"invalid-feedback",children:s.branch_code})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label required",children:"Risk Level"}),e.jsxs("select",{className:`form-select ${s.risk_level?"is-invalid":""}`,value:l.risk_level,onChange:a=>c("risk_level",a.target.value),children:[e.jsx("option",{value:"",children:"Select Risk Level"}),o.map(a=>e.jsx("option",{value:a,children:a},a))]}),s.risk_level&&e.jsx("div",{className:"invalid-feedback",children:s.risk_level})]})}),e.jsx("div",{className:"col-lg-4 col-md-12",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("div",{className:"form-check form-switch mt-2",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:l.is_active,onChange:a=>c("is_active",a.target.checked)}),e.jsx("label",{className:"form-check-label",children:l.is_active?"Active":"Inactive"})]})]})})]}),e.jsxs("div",{className:"row g-3 mb-4",children:[e.jsx("div",{className:"col-12",children:e.jsx("h4",{className:"text-dark fw-bold mb-3",children:"Financial Metrics"})}),e.jsx("div",{className:"col-lg-3 col-md-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"Total Loans Outstanding"}),e.jsx("input",{type:"number",step:"0.01",className:`form-control ${s.total_loans_outstanding?"is-invalid":""}`,value:l.total_loans_outstanding,onChange:a=>c("total_loans_outstanding",parseFloat(a.target.value)||0),placeholder:"0.00"}),s.total_loans_outstanding&&e.jsx("div",{className:"invalid-feedback",children:s.total_loans_outstanding})]})}),e.jsx("div",{className:"col-lg-3 col-md-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"Total Deposits"}),e.jsx("input",{type:"number",step:"0.01",className:`form-control ${s.total_deposits?"is-invalid":""}`,value:l.total_deposits,onChange:a=>c("total_deposits",parseFloat(a.target.value)||0),placeholder:"0.00"}),s.total_deposits&&e.jsx("div",{className:"invalid-feedback",children:s.total_deposits})]})}),e.jsx("div",{className:"col-lg-3 col-md-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"NPL Exposure"}),e.jsx("input",{type:"number",step:"0.01",className:`form-control ${s.npl_exposure?"is-invalid":""}`,value:l.npl_exposure,onChange:a=>c("npl_exposure",parseFloat(a.target.value)||0),placeholder:"0.00"}),s.npl_exposure&&e.jsx("div",{className:"invalid-feedback",children:s.npl_exposure})]})}),e.jsx("div",{className:"col-lg-3 col-md-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"Profitability"}),e.jsx("input",{type:"number",step:"0.01",className:`form-control ${s.profitability?"is-invalid":""}`,value:l.profitability,onChange:a=>c("profitability",parseFloat(a.target.value)||0),placeholder:"0.00"}),s.profitability&&e.jsx("div",{className:"invalid-feedback",children:s.profitability})]})})]}),e.jsxs("div",{className:"row g-3 mb-4",children:[e.jsx("div",{className:"col-12",children:e.jsx("h4",{className:"text-dark fw-bold mb-3",children:"Demographics"})}),e.jsx("div",{className:"col-lg-2 col-md-4 col-sm-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"Age"}),e.jsx("input",{type:"number",className:"form-control",value:l.demographics.age,onChange:a=>c("demographics",{...l.demographics,age:a.target.value}),placeholder:"Age"})]})}),e.jsx("div",{className:"col-lg-2 col-md-4 col-sm-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"Gender"}),e.jsxs("select",{className:"form-select",value:l.demographics.gender,onChange:a=>c("demographics",{...l.demographics,gender:a.target.value}),children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]})}),e.jsx("div",{className:"col-lg-4 col-md-8",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"Occupation"}),e.jsx("input",{type:"text",className:"form-control",value:l.demographics.occupation,onChange:a=>c("demographics",{...l.demographics,occupation:a.target.value}),placeholder:"Occupation"})]})}),e.jsx("div",{className:"col-lg-4 col-md-12",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("input",{type:"text",className:"form-control",value:l.demographics.address,onChange:a=>c("demographics",{...l.demographics,address:a.target.value}),placeholder:"Street address"})]})})]}),e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-lg-6 col-md-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"City"}),e.jsx("input",{type:"text",className:"form-control",value:l.demographics.city,onChange:a=>c("demographics",{...l.demographics,city:a.target.value}),placeholder:"City"})]})}),e.jsx("div",{className:"col-lg-6 col-md-6",children:e.jsxs("div",{className:"mb-0",children:[e.jsx("label",{className:"form-label",children:"Country"}),e.jsx("input",{type:"text",className:"form-control",value:l.demographics.country,onChange:a=>c("demographics",{...l.demographics,country:a.target.value}),placeholder:"Country"})]})})]})]}),e.jsx("div",{className:"card-footer text-end",children:e.jsxs("div",{className:"d-flex",children:[e.jsx(r,{href:`/customers/${i.id}`,className:"btn btn-link",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary ms-auto",disabled:d,children:[e.jsx(N,{size:16,className:"me-1"}),d?"Updating...":"Update Customer"]})]})})]})})})})})})]})}export{$ as default};
