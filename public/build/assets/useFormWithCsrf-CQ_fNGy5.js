import{e as d,r as m,v as n,b as a}from"./app-BkeQkwCz.js";const T=(i={},f={})=>{const e=d(i,f);m.useEffect(()=>{n()||console.warn("CSRF token validation failed. Page may need to be refreshed.")},[]);const s=e.transform;e.transform=r=>{const o=s?s(r):r,t=a();return t&&!o._token&&(o._token=t),o};const c=e.post,l=e.put,k=e.patch,u=e.delete;return e.post=(r,o={})=>{if(!n())return console.error("CSRF token not available for POST request"),Promise.reject(new Error("CSRF token not available"));if(e.data&&!e.data._token){const t=a();t&&e.setData("_token",t)}return c(r,o)},e.put=(r,o={})=>{if(!n())return console.error("CSRF token not available for PUT request"),Promise.reject(new Error("CSRF token not available"));if(e.data&&!e.data._token){const t=a();t&&e.setData("_token",t)}return l(r,o)},e.patch=(r,o={})=>{if(!n())return console.error("CSRF token not available for PATCH request"),Promise.reject(new Error("CSRF token not available"));if(e.data&&!e.data._token){const t=a();t&&e.setData("_token",t)}return k(r,o)},e.delete=(r,o={})=>{if(!n())return console.error("CSRF token not available for DELETE request"),Promise.reject(new Error("CSRF token not available"));if(e.data&&!e.data._token){const t=a();t&&e.setData("_token",t)}return u(r,o)},e};export{T as u};
